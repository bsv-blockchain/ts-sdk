<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="TypeScript SDK for Bitcoin SV"><link href=https://bsv-blockchain.github.io/ts-sdk/reference/remittance/ rel=canonical><link href=../kvstore/ rel=prev><link href=../messages/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.3"><title>Remittance - BSV TypeScript SDK</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="BSV TypeScript SDK" class="md-header__button md-logo" aria-label="BSV TypeScript SDK" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> BSV TypeScript SDK </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Remittance </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/bsv-blockchain/ts-sdk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> bsv-blockchain/ts-sdk </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="BSV TypeScript SDK" class="md-nav__button md-logo" aria-label="BSV TypeScript SDK" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> BSV TypeScript SDK </label> <div class=md-nav__source> <a href=https://github.com/bsv-blockchain/ts-sdk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> bsv-blockchain/ts-sdk </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=https://fast.brc.dev class=md-nav__link> <span class=md-ellipsis> WalletClient QuickStart </span> </a> </li> <li class=md-nav__item> <a href=../../swagger/ class=md-nav__link> <span class=md-ellipsis> Swagger BRC-100 Interface </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../remittance-getting-started/ class=md-nav__link> <span class=md-ellipsis> Remittance Getting Started </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../wallet/ class=md-nav__link> <span class=md-ellipsis> Wallet </span> </a> </li> <li class=md-nav__item> <a href=../primitives/ class=md-nav__link> <span class=md-ellipsis> Primitives </span> </a> </li> <li class=md-nav__item> <a href=../script/ class=md-nav__link> <span class=md-ellipsis> Script </span> </a> </li> <li class=md-nav__item> <a href=../transaction/ class=md-nav__link> <span class=md-ellipsis> Transaction </span> </a> </li> <li class=md-nav__item> <a href=../auth/ class=md-nav__link> <span class=md-ellipsis> Mutual Authentication </span> </a> </li> <li class=md-nav__item> <a href=../identity/ class=md-nav__link> <span class=md-ellipsis> Identity </span> </a> </li> <li class=md-nav__item> <a href=../overlay-tools/ class=md-nav__link> <span class=md-ellipsis> Overlay Tools </span> </a> </li> <li class=md-nav__item> <a href=../registry/ class=md-nav__link> <span class=md-ellipsis> Registry </span> </a> </li> <li class=md-nav__item> <a href=../storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class=md-nav__item> <a href=../kvstore/ class=md-nav__link> <span class=md-ellipsis> KV Store </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Remittance </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Remittance </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#interfaces class=md-nav__link> <span class=md-ellipsis> Interfaces </span> </a> <nav class=md-nav aria-label=Interfaces> <ul class=md-nav__list> <li class=md-nav__item> <a href=#interface-amount class=md-nav__link> <span class=md-ellipsis> Interface: Amount </span> </a> <nav class=md-nav aria-label="Interface: Amount"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-value class=md-nav__link> <span class=md-ellipsis> Property value </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29optionterms class=md-nav__link> <span class=md-ellipsis> Interface: Brc29OptionTerms </span> </a> <nav class=md-nav aria-label="Interface: Brc29OptionTerms"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-amountsatoshis class=md-nav__link> <span class=md-ellipsis> Property amountSatoshis </span> </a> </li> <li class=md-nav__item> <a href=#property-description class=md-nav__link> <span class=md-ellipsis> Property description </span> </a> </li> <li class=md-nav__item> <a href=#property-labels class=md-nav__link> <span class=md-ellipsis> Property labels </span> </a> </li> <li class=md-nav__item> <a href=#property-outputindex class=md-nav__link> <span class=md-ellipsis> Property outputIndex </span> </a> </li> <li class=md-nav__item> <a href=#property-payee class=md-nav__link> <span class=md-ellipsis> Property payee </span> </a> </li> <li class=md-nav__item> <a href=#property-protocolid class=md-nav__link> <span class=md-ellipsis> Property protocolID </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29receiptdata class=md-nav__link> <span class=md-ellipsis> Interface: Brc29ReceiptData </span> </a> <nav class=md-nav aria-label="Interface: Brc29ReceiptData"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-internalizeresult class=md-nav__link> <span class=md-ellipsis> Property internalizeResult </span> </a> </li> <li class=md-nav__item> <a href=#property-refund class=md-nav__link> <span class=md-ellipsis> Property refund </span> </a> </li> <li class=md-nav__item> <a href=#property-rejectedreason class=md-nav__link> <span class=md-ellipsis> Property rejectedReason </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29remittancemoduleconfig class=md-nav__link> <span class=md-ellipsis> Interface: Brc29RemittanceModuleConfig </span> </a> <nav class=md-nav aria-label="Interface: Brc29RemittanceModuleConfig"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-description_1 class=md-nav__link> <span class=md-ellipsis> Property description </span> </a> </li> <li class=md-nav__item> <a href=#property-internalizeprotocol class=md-nav__link> <span class=md-ellipsis> Property internalizeProtocol </span> </a> </li> <li class=md-nav__item> <a href=#property-labels_1 class=md-nav__link> <span class=md-ellipsis> Property labels </span> </a> </li> <li class=md-nav__item> <a href=#property-minrefundsatoshis class=md-nav__link> <span class=md-ellipsis> Property minRefundSatoshis </span> </a> </li> <li class=md-nav__item> <a href=#property-outputdescription class=md-nav__link> <span class=md-ellipsis> Property outputDescription </span> </a> </li> <li class=md-nav__item> <a href=#property-protocolid_1 class=md-nav__link> <span class=md-ellipsis> Property protocolID </span> </a> </li> <li class=md-nav__item> <a href=#property-refundfeesatoshis class=md-nav__link> <span class=md-ellipsis> Property refundFeeSatoshis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29settlementartifact class=md-nav__link> <span class=md-ellipsis> Interface: Brc29SettlementArtifact </span> </a> </li> <li class=md-nav__item> <a href=#interface-commslayer class=md-nav__link> <span class=md-ellipsis> Interface: CommsLayer </span> </a> <nav class=md-nav aria-label="Interface: CommsLayer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-acknowledgemessage class=md-nav__link> <span class=md-ellipsis> Property acknowledgeMessage </span> </a> </li> <li class=md-nav__item> <a href=#property-listmessages class=md-nav__link> <span class=md-ellipsis> Property listMessages </span> </a> </li> <li class=md-nav__item> <a href=#property-listenforlivemessages class=md-nav__link> <span class=md-ellipsis> Property listenForLiveMessages </span> </a> </li> <li class=md-nav__item> <a href=#property-sendlivemessage class=md-nav__link> <span class=md-ellipsis> Property sendLiveMessage </span> </a> </li> <li class=md-nav__item> <a href=#property-sendmessage class=md-nav__link> <span class=md-ellipsis> Property sendMessage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-composeinvoiceinput class=md-nav__link> <span class=md-ellipsis> Interface: ComposeInvoiceInput </span> </a> <nav class=md-nav aria-label="Interface: ComposeInvoiceInput"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-lineitems class=md-nav__link> <span class=md-ellipsis> Property lineItems </span> </a> </li> <li class=md-nav__item> <a href=#property-note class=md-nav__link> <span class=md-ellipsis> Property note </span> </a> </li> <li class=md-nav__item> <a href=#property-total class=md-nav__link> <span class=md-ellipsis> Property total </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-identitylayer class=md-nav__link> <span class=md-ellipsis> Interface: IdentityLayer </span> </a> <nav class=md-nav aria-label="Interface: IdentityLayer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-assessreceivedcertificatesufficiency class=md-nav__link> <span class=md-ellipsis> Property assessReceivedCertificateSufficiency </span> </a> </li> <li class=md-nav__item> <a href=#property-determinecertificatestorequest class=md-nav__link> <span class=md-ellipsis> Property determineCertificatesToRequest </span> </a> </li> <li class=md-nav__item> <a href=#property-respondtorequest class=md-nav__link> <span class=md-ellipsis> Property respondToRequest </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-identityverificationacknowledgment class=md-nav__link> <span class=md-ellipsis> Interface: IdentityVerificationAcknowledgment </span> </a> </li> <li class=md-nav__item> <a href=#interface-identityverificationrequest class=md-nav__link> <span class=md-ellipsis> Interface: IdentityVerificationRequest </span> </a> <nav class=md-nav aria-label="Interface: IdentityVerificationRequest"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-request class=md-nav__link> <span class=md-ellipsis> Property request </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-identityverificationresponse class=md-nav__link> <span class=md-ellipsis> Interface: IdentityVerificationResponse </span> </a> <nav class=md-nav aria-label="Interface: IdentityVerificationResponse"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-certificates class=md-nav__link> <span class=md-ellipsis> Property certificates </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-instrumentbase class=md-nav__link> <span class=md-ellipsis> Interface: InstrumentBase </span> </a> </li> <li class=md-nav__item> <a href=#interface-invoice class=md-nav__link> <span class=md-ellipsis> Interface: Invoice </span> </a> </li> <li class=md-nav__item> <a href=#interface-lineitem class=md-nav__link> <span class=md-ellipsis> Interface: LineItem </span> </a> <nav class=md-nav aria-label="Interface: LineItem"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-amount class=md-nav__link> <span class=md-ellipsis> Property amount </span> </a> </li> <li class=md-nav__item> <a href=#property-quantity class=md-nav__link> <span class=md-ellipsis> Property quantity </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-lockingscriptprovider class=md-nav__link> <span class=md-ellipsis> Interface: LockingScriptProvider </span> </a> <nav class=md-nav aria-label="Interface: LockingScriptProvider"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-pubkeytop2pkhlockingscript class=md-nav__link> <span class=md-ellipsis> Property pubKeyToP2PKHLockingScript </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-loggerlike class=md-nav__link> <span class=md-ellipsis> Interface: LoggerLike </span> </a> </li> <li class=md-nav__item> <a href=#interface-modulecontext class=md-nav__link> <span class=md-ellipsis> Interface: ModuleContext </span> </a> <nav class=md-nav aria-label="Interface: ModuleContext"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-originator class=md-nav__link> <span class=md-ellipsis> Property originator </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-nonceprovider class=md-nav__link> <span class=md-ellipsis> Interface: NonceProvider </span> </a> </li> <li class=md-nav__item> <a href=#interface-peermessage class=md-nav__link> <span class=md-ellipsis> Interface: PeerMessage </span> </a> </li> <li class=md-nav__item> <a href=#interface-receipt class=md-nav__link> <span class=md-ellipsis> Interface: Receipt </span> </a> </li> <li class=md-nav__item> <a href=#interface-remittanceenvelope class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceEnvelope </span> </a> <nav class=md-nav aria-label="Interface: RemittanceEnvelope"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-id class=md-nav__link> <span class=md-ellipsis> Property id </span> </a> </li> <li class=md-nav__item> <a href=#property-v class=md-nav__link> <span class=md-ellipsis> Property v </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-remittanceeventhandlers class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceEventHandlers </span> </a> </li> <li class=md-nav__item> <a href=#interface-remittancemanagerconfig class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceManagerConfig </span> </a> <nav class=md-nav aria-label="Interface: RemittanceManagerConfig"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-events class=md-nav__link> <span class=md-ellipsis> Property events </span> </a> </li> <li class=md-nav__item> <a href=#property-identitylayer class=md-nav__link> <span class=md-ellipsis> Property identityLayer </span> </a> </li> <li class=md-nav__item> <a href=#property-logger class=md-nav__link> <span class=md-ellipsis> Property logger </span> </a> </li> <li class=md-nav__item> <a href=#property-messagebox class=md-nav__link> <span class=md-ellipsis> Property messageBox </span> </a> </li> <li class=md-nav__item> <a href=#property-now class=md-nav__link> <span class=md-ellipsis> Property now </span> </a> </li> <li class=md-nav__item> <a href=#property-onevent class=md-nav__link> <span class=md-ellipsis> Property onEvent </span> </a> </li> <li class=md-nav__item> <a href=#property-options class=md-nav__link> <span class=md-ellipsis> Property options </span> </a> </li> <li class=md-nav__item> <a href=#property-originator_1 class=md-nav__link> <span class=md-ellipsis> Property originator </span> </a> </li> <li class=md-nav__item> <a href=#property-remittancemodules class=md-nav__link> <span class=md-ellipsis> Property remittanceModules </span> </a> </li> <li class=md-nav__item> <a href=#property-stateloader class=md-nav__link> <span class=md-ellipsis> Property stateLoader </span> </a> </li> <li class=md-nav__item> <a href=#property-statesaver class=md-nav__link> <span class=md-ellipsis> Property stateSaver </span> </a> </li> <li class=md-nav__item> <a href=#property-threadidfactory class=md-nav__link> <span class=md-ellipsis> Property threadIdFactory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-remittancemanagerruntimeoptions class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceManagerRuntimeOptions </span> </a> <nav class=md-nav aria-label="Interface: RemittanceManagerRuntimeOptions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-autoissuereceipt class=md-nav__link> <span class=md-ellipsis> Property autoIssueReceipt </span> </a> </li> <li class=md-nav__item> <a href=#property-identityoptions class=md-nav__link> <span class=md-ellipsis> Property identityOptions </span> </a> </li> <li class=md-nav__item> <a href=#property-identitypollintervalms class=md-nav__link> <span class=md-ellipsis> Property identityPollIntervalMs </span> </a> </li> <li class=md-nav__item> <a href=#property-identitytimeoutms class=md-nav__link> <span class=md-ellipsis> Property identityTimeoutMs </span> </a> </li> <li class=md-nav__item> <a href=#property-invoiceexpiryseconds class=md-nav__link> <span class=md-ellipsis> Property invoiceExpirySeconds </span> </a> </li> <li class=md-nav__item> <a href=#property-receiptprovided class=md-nav__link> <span class=md-ellipsis> Property receiptProvided </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-remittancemanagerstate class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceManagerState </span> </a> </li> <li class=md-nav__item> <a href=#interface-remittancemodule class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceModule </span> </a> <nav class=md-nav aria-label="Interface: RemittanceModule"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-acceptsettlement class=md-nav__link> <span class=md-ellipsis> Property acceptSettlement </span> </a> </li> <li class=md-nav__item> <a href=#property-allowunsolicitedsettlements class=md-nav__link> <span class=md-ellipsis> Property allowUnsolicitedSettlements </span> </a> </li> <li class=md-nav__item> <a href=#property-buildsettlement class=md-nav__link> <span class=md-ellipsis> Property buildSettlement </span> </a> </li> <li class=md-nav__item> <a href=#property-createoption class=md-nav__link> <span class=md-ellipsis> Property createOption </span> </a> </li> <li class=md-nav__item> <a href=#property-id_1 class=md-nav__link> <span class=md-ellipsis> Property id </span> </a> </li> <li class=md-nav__item> <a href=#property-name class=md-nav__link> <span class=md-ellipsis> Property name </span> </a> </li> <li class=md-nav__item> <a href=#property-processreceipt class=md-nav__link> <span class=md-ellipsis> Property processReceipt </span> </a> </li> <li class=md-nav__item> <a href=#property-processtermination class=md-nav__link> <span class=md-ellipsis> Property processTermination </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-settlement class=md-nav__link> <span class=md-ellipsis> Interface: Settlement </span> </a> </li> <li class=md-nav__item> <a href=#interface-termination class=md-nav__link> <span class=md-ellipsis> Interface: Termination </span> </a> <nav class=md-nav aria-label="Interface: Termination"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-code class=md-nav__link> <span class=md-ellipsis> Property code </span> </a> </li> <li class=md-nav__item> <a href=#property-details class=md-nav__link> <span class=md-ellipsis> Property details </span> </a> </li> <li class=md-nav__item> <a href=#property-message class=md-nav__link> <span class=md-ellipsis> Property message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-thread class=md-nav__link> <span class=md-ellipsis> Interface: Thread </span> </a> <nav class=md-nav aria-label="Interface: Thread"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-processedmessageids class=md-nav__link> <span class=md-ellipsis> Property processedMessageIds </span> </a> </li> <li class=md-nav__item> <a href=#property-protocollog class=md-nav__link> <span class=md-ellipsis> Property protocolLog </span> </a> </li> <li class=md-nav__item> <a href=#property-statelog class=md-nav__link> <span class=md-ellipsis> Property stateLog </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-unit class=md-nav__link> <span class=md-ellipsis> Interface: Unit </span> </a> <nav class=md-nav aria-label="Interface: Unit"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-code_1 class=md-nav__link> <span class=md-ellipsis> Property code </span> </a> </li> <li class=md-nav__item> <a href=#property-decimals class=md-nav__link> <span class=md-ellipsis> Property decimals </span> </a> </li> <li class=md-nav__item> <a href=#property-namespace class=md-nav__link> <span class=md-ellipsis> Property namespace </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#classes class=md-nav__link> <span class=md-ellipsis> Classes </span> </a> <nav class=md-nav aria-label=Classes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#class-brc29remittancemodule class=md-nav__link> <span class=md-ellipsis> Class: Brc29RemittanceModule </span> </a> </li> <li class=md-nav__item> <a href=#class-invoicehandle class=md-nav__link> <span class=md-ellipsis> Class: InvoiceHandle </span> </a> <nav class=md-nav aria-label="Class: InvoiceHandle"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#method-pay class=md-nav__link> <span class=md-ellipsis> Method pay </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#class-remittancemanager class=md-nav__link> <span class=md-ellipsis> Class: RemittanceManager </span> </a> <nav class=md-nav aria-label="Class: RemittanceManager"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-threads class=md-nav__link> <span class=md-ellipsis> Property threads </span> </a> </li> <li class=md-nav__item> <a href=#method-findinvoicespayable class=md-nav__link> <span class=md-ellipsis> Method findInvoicesPayable </span> </a> </li> <li class=md-nav__item> <a href=#method-findreceivableinvoices class=md-nav__link> <span class=md-ellipsis> Method findReceivableInvoices </span> </a> </li> <li class=md-nav__item> <a href=#method-getthread class=md-nav__link> <span class=md-ellipsis> Method getThread </span> </a> </li> <li class=md-nav__item> <a href=#method-getthreadhandle class=md-nav__link> <span class=md-ellipsis> Method getThreadHandle </span> </a> </li> <li class=md-nav__item> <a href=#method-getthreadorthrow class=md-nav__link> <span class=md-ellipsis> Method getThreadOrThrow </span> </a> </li> <li class=md-nav__item> <a href=#method-init class=md-nav__link> <span class=md-ellipsis> Method init </span> </a> </li> <li class=md-nav__item> <a href=#method-loadstate class=md-nav__link> <span class=md-ellipsis> Method loadState </span> </a> </li> <li class=md-nav__item> <a href=#method-onevent class=md-nav__link> <span class=md-ellipsis> Method onEvent </span> </a> </li> <li class=md-nav__item> <a href=#method-pay_1 class=md-nav__link> <span class=md-ellipsis> Method pay </span> </a> </li> <li class=md-nav__item> <a href=#method-persiststate class=md-nav__link> <span class=md-ellipsis> Method persistState </span> </a> </li> <li class=md-nav__item> <a href=#method-preselectpaymentoption class=md-nav__link> <span class=md-ellipsis> Method preselectPaymentOption </span> </a> </li> <li class=md-nav__item> <a href=#method-savestate class=md-nav__link> <span class=md-ellipsis> Method saveState </span> </a> </li> <li class=md-nav__item> <a href=#method-sendinvoice class=md-nav__link> <span class=md-ellipsis> Method sendInvoice </span> </a> </li> <li class=md-nav__item> <a href=#method-sendinvoiceforthread class=md-nav__link> <span class=md-ellipsis> Method sendInvoiceForThread </span> </a> </li> <li class=md-nav__item> <a href=#method-sendunsolicitedsettlement class=md-nav__link> <span class=md-ellipsis> Method sendUnsolicitedSettlement </span> </a> </li> <li class=md-nav__item> <a href=#method-startlistening class=md-nav__link> <span class=md-ellipsis> Method startListening </span> </a> </li> <li class=md-nav__item> <a href=#method-syncthreads class=md-nav__link> <span class=md-ellipsis> Method syncThreads </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforidentity class=md-nav__link> <span class=md-ellipsis> Method waitForIdentity </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforreceipt class=md-nav__link> <span class=md-ellipsis> Method waitForReceipt </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforsettlement class=md-nav__link> <span class=md-ellipsis> Method waitForSettlement </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforstate class=md-nav__link> <span class=md-ellipsis> Method waitForState </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#class-threadhandle class=md-nav__link> <span class=md-ellipsis> Class: ThreadHandle </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#functions class=md-nav__link> <span class=md-ellipsis> Functions </span> </a> </li> <li class=md-nav__item> <a href=#types class=md-nav__link> <span class=md-ellipsis> Types </span> </a> <nav class=md-nav aria-label=Types> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-remittanceevent class=md-nav__link> <span class=md-ellipsis> Type: RemittanceEvent </span> </a> </li> <li class=md-nav__item> <a href=#type-remittancekind class=md-nav__link> <span class=md-ellipsis> Type: RemittanceKind </span> </a> </li> <li class=md-nav__item> <a href=#type-remittanceoptionid class=md-nav__link> <span class=md-ellipsis> Type: RemittanceOptionId </span> </a> </li> <li class=md-nav__item> <a href=#type-remittancethreadstate class=md-nav__link> <span class=md-ellipsis> Type: RemittanceThreadState </span> </a> </li> <li class=md-nav__item> <a href=#type-threadid class=md-nav__link> <span class=md-ellipsis> Type: ThreadId </span> </a> </li> <li class=md-nav__item> <a href=#type-unixmillis class=md-nav__link> <span class=md-ellipsis> Type: UnixMillis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#enums class=md-nav__link> <span class=md-ellipsis> Enums </span> </a> </li> <li class=md-nav__item> <a href=#variables class=md-nav__link> <span class=md-ellipsis> Variables </span> </a> <nav class=md-nav aria-label=Variables> <ul class=md-nav__list> <li class=md-nav__item> <a href=#variable-default_remittance_messagebox class=md-nav__link> <span class=md-ellipsis> Variable: DEFAULT_REMITTANCE_MESSAGEBOX </span> </a> </li> <li class=md-nav__item> <a href=#variable-defaultlockingscriptprovider class=md-nav__link> <span class=md-ellipsis> Variable: DefaultLockingScriptProvider </span> </a> </li> <li class=md-nav__item> <a href=#variable-defaultnonceprovider class=md-nav__link> <span class=md-ellipsis> Variable: DefaultNonceProvider </span> </a> </li> <li class=md-nav__item> <a href=#variable-remittance_state_transitions class=md-nav__link> <span class=md-ellipsis> Variable: REMITTANCE_STATE_TRANSITIONS </span> </a> </li> <li class=md-nav__item> <a href=#variable-sat_unit class=md-nav__link> <span class=md-ellipsis> Variable: SAT_UNIT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../messages/ class=md-nav__link> <span class=md-ellipsis> Messages </span> </a> </li> <li class=md-nav__item> <a href=../totp/ class=md-nav__link> <span class=md-ellipsis> TOTP </span> </a> </li> <li class=md-nav__item> <a href=../compat/ class=md-nav__link> <span class=md-ellipsis> Compatibility </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#interfaces class=md-nav__link> <span class=md-ellipsis> Interfaces </span> </a> <nav class=md-nav aria-label=Interfaces> <ul class=md-nav__list> <li class=md-nav__item> <a href=#interface-amount class=md-nav__link> <span class=md-ellipsis> Interface: Amount </span> </a> <nav class=md-nav aria-label="Interface: Amount"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-value class=md-nav__link> <span class=md-ellipsis> Property value </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29optionterms class=md-nav__link> <span class=md-ellipsis> Interface: Brc29OptionTerms </span> </a> <nav class=md-nav aria-label="Interface: Brc29OptionTerms"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-amountsatoshis class=md-nav__link> <span class=md-ellipsis> Property amountSatoshis </span> </a> </li> <li class=md-nav__item> <a href=#property-description class=md-nav__link> <span class=md-ellipsis> Property description </span> </a> </li> <li class=md-nav__item> <a href=#property-labels class=md-nav__link> <span class=md-ellipsis> Property labels </span> </a> </li> <li class=md-nav__item> <a href=#property-outputindex class=md-nav__link> <span class=md-ellipsis> Property outputIndex </span> </a> </li> <li class=md-nav__item> <a href=#property-payee class=md-nav__link> <span class=md-ellipsis> Property payee </span> </a> </li> <li class=md-nav__item> <a href=#property-protocolid class=md-nav__link> <span class=md-ellipsis> Property protocolID </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29receiptdata class=md-nav__link> <span class=md-ellipsis> Interface: Brc29ReceiptData </span> </a> <nav class=md-nav aria-label="Interface: Brc29ReceiptData"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-internalizeresult class=md-nav__link> <span class=md-ellipsis> Property internalizeResult </span> </a> </li> <li class=md-nav__item> <a href=#property-refund class=md-nav__link> <span class=md-ellipsis> Property refund </span> </a> </li> <li class=md-nav__item> <a href=#property-rejectedreason class=md-nav__link> <span class=md-ellipsis> Property rejectedReason </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29remittancemoduleconfig class=md-nav__link> <span class=md-ellipsis> Interface: Brc29RemittanceModuleConfig </span> </a> <nav class=md-nav aria-label="Interface: Brc29RemittanceModuleConfig"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-description_1 class=md-nav__link> <span class=md-ellipsis> Property description </span> </a> </li> <li class=md-nav__item> <a href=#property-internalizeprotocol class=md-nav__link> <span class=md-ellipsis> Property internalizeProtocol </span> </a> </li> <li class=md-nav__item> <a href=#property-labels_1 class=md-nav__link> <span class=md-ellipsis> Property labels </span> </a> </li> <li class=md-nav__item> <a href=#property-minrefundsatoshis class=md-nav__link> <span class=md-ellipsis> Property minRefundSatoshis </span> </a> </li> <li class=md-nav__item> <a href=#property-outputdescription class=md-nav__link> <span class=md-ellipsis> Property outputDescription </span> </a> </li> <li class=md-nav__item> <a href=#property-protocolid_1 class=md-nav__link> <span class=md-ellipsis> Property protocolID </span> </a> </li> <li class=md-nav__item> <a href=#property-refundfeesatoshis class=md-nav__link> <span class=md-ellipsis> Property refundFeeSatoshis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-brc29settlementartifact class=md-nav__link> <span class=md-ellipsis> Interface: Brc29SettlementArtifact </span> </a> </li> <li class=md-nav__item> <a href=#interface-commslayer class=md-nav__link> <span class=md-ellipsis> Interface: CommsLayer </span> </a> <nav class=md-nav aria-label="Interface: CommsLayer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-acknowledgemessage class=md-nav__link> <span class=md-ellipsis> Property acknowledgeMessage </span> </a> </li> <li class=md-nav__item> <a href=#property-listmessages class=md-nav__link> <span class=md-ellipsis> Property listMessages </span> </a> </li> <li class=md-nav__item> <a href=#property-listenforlivemessages class=md-nav__link> <span class=md-ellipsis> Property listenForLiveMessages </span> </a> </li> <li class=md-nav__item> <a href=#property-sendlivemessage class=md-nav__link> <span class=md-ellipsis> Property sendLiveMessage </span> </a> </li> <li class=md-nav__item> <a href=#property-sendmessage class=md-nav__link> <span class=md-ellipsis> Property sendMessage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-composeinvoiceinput class=md-nav__link> <span class=md-ellipsis> Interface: ComposeInvoiceInput </span> </a> <nav class=md-nav aria-label="Interface: ComposeInvoiceInput"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-lineitems class=md-nav__link> <span class=md-ellipsis> Property lineItems </span> </a> </li> <li class=md-nav__item> <a href=#property-note class=md-nav__link> <span class=md-ellipsis> Property note </span> </a> </li> <li class=md-nav__item> <a href=#property-total class=md-nav__link> <span class=md-ellipsis> Property total </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-identitylayer class=md-nav__link> <span class=md-ellipsis> Interface: IdentityLayer </span> </a> <nav class=md-nav aria-label="Interface: IdentityLayer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-assessreceivedcertificatesufficiency class=md-nav__link> <span class=md-ellipsis> Property assessReceivedCertificateSufficiency </span> </a> </li> <li class=md-nav__item> <a href=#property-determinecertificatestorequest class=md-nav__link> <span class=md-ellipsis> Property determineCertificatesToRequest </span> </a> </li> <li class=md-nav__item> <a href=#property-respondtorequest class=md-nav__link> <span class=md-ellipsis> Property respondToRequest </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-identityverificationacknowledgment class=md-nav__link> <span class=md-ellipsis> Interface: IdentityVerificationAcknowledgment </span> </a> </li> <li class=md-nav__item> <a href=#interface-identityverificationrequest class=md-nav__link> <span class=md-ellipsis> Interface: IdentityVerificationRequest </span> </a> <nav class=md-nav aria-label="Interface: IdentityVerificationRequest"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-request class=md-nav__link> <span class=md-ellipsis> Property request </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-identityverificationresponse class=md-nav__link> <span class=md-ellipsis> Interface: IdentityVerificationResponse </span> </a> <nav class=md-nav aria-label="Interface: IdentityVerificationResponse"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-certificates class=md-nav__link> <span class=md-ellipsis> Property certificates </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-instrumentbase class=md-nav__link> <span class=md-ellipsis> Interface: InstrumentBase </span> </a> </li> <li class=md-nav__item> <a href=#interface-invoice class=md-nav__link> <span class=md-ellipsis> Interface: Invoice </span> </a> </li> <li class=md-nav__item> <a href=#interface-lineitem class=md-nav__link> <span class=md-ellipsis> Interface: LineItem </span> </a> <nav class=md-nav aria-label="Interface: LineItem"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-amount class=md-nav__link> <span class=md-ellipsis> Property amount </span> </a> </li> <li class=md-nav__item> <a href=#property-quantity class=md-nav__link> <span class=md-ellipsis> Property quantity </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-lockingscriptprovider class=md-nav__link> <span class=md-ellipsis> Interface: LockingScriptProvider </span> </a> <nav class=md-nav aria-label="Interface: LockingScriptProvider"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-pubkeytop2pkhlockingscript class=md-nav__link> <span class=md-ellipsis> Property pubKeyToP2PKHLockingScript </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-loggerlike class=md-nav__link> <span class=md-ellipsis> Interface: LoggerLike </span> </a> </li> <li class=md-nav__item> <a href=#interface-modulecontext class=md-nav__link> <span class=md-ellipsis> Interface: ModuleContext </span> </a> <nav class=md-nav aria-label="Interface: ModuleContext"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-originator class=md-nav__link> <span class=md-ellipsis> Property originator </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-nonceprovider class=md-nav__link> <span class=md-ellipsis> Interface: NonceProvider </span> </a> </li> <li class=md-nav__item> <a href=#interface-peermessage class=md-nav__link> <span class=md-ellipsis> Interface: PeerMessage </span> </a> </li> <li class=md-nav__item> <a href=#interface-receipt class=md-nav__link> <span class=md-ellipsis> Interface: Receipt </span> </a> </li> <li class=md-nav__item> <a href=#interface-remittanceenvelope class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceEnvelope </span> </a> <nav class=md-nav aria-label="Interface: RemittanceEnvelope"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-id class=md-nav__link> <span class=md-ellipsis> Property id </span> </a> </li> <li class=md-nav__item> <a href=#property-v class=md-nav__link> <span class=md-ellipsis> Property v </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-remittanceeventhandlers class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceEventHandlers </span> </a> </li> <li class=md-nav__item> <a href=#interface-remittancemanagerconfig class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceManagerConfig </span> </a> <nav class=md-nav aria-label="Interface: RemittanceManagerConfig"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-events class=md-nav__link> <span class=md-ellipsis> Property events </span> </a> </li> <li class=md-nav__item> <a href=#property-identitylayer class=md-nav__link> <span class=md-ellipsis> Property identityLayer </span> </a> </li> <li class=md-nav__item> <a href=#property-logger class=md-nav__link> <span class=md-ellipsis> Property logger </span> </a> </li> <li class=md-nav__item> <a href=#property-messagebox class=md-nav__link> <span class=md-ellipsis> Property messageBox </span> </a> </li> <li class=md-nav__item> <a href=#property-now class=md-nav__link> <span class=md-ellipsis> Property now </span> </a> </li> <li class=md-nav__item> <a href=#property-onevent class=md-nav__link> <span class=md-ellipsis> Property onEvent </span> </a> </li> <li class=md-nav__item> <a href=#property-options class=md-nav__link> <span class=md-ellipsis> Property options </span> </a> </li> <li class=md-nav__item> <a href=#property-originator_1 class=md-nav__link> <span class=md-ellipsis> Property originator </span> </a> </li> <li class=md-nav__item> <a href=#property-remittancemodules class=md-nav__link> <span class=md-ellipsis> Property remittanceModules </span> </a> </li> <li class=md-nav__item> <a href=#property-stateloader class=md-nav__link> <span class=md-ellipsis> Property stateLoader </span> </a> </li> <li class=md-nav__item> <a href=#property-statesaver class=md-nav__link> <span class=md-ellipsis> Property stateSaver </span> </a> </li> <li class=md-nav__item> <a href=#property-threadidfactory class=md-nav__link> <span class=md-ellipsis> Property threadIdFactory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-remittancemanagerruntimeoptions class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceManagerRuntimeOptions </span> </a> <nav class=md-nav aria-label="Interface: RemittanceManagerRuntimeOptions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-autoissuereceipt class=md-nav__link> <span class=md-ellipsis> Property autoIssueReceipt </span> </a> </li> <li class=md-nav__item> <a href=#property-identityoptions class=md-nav__link> <span class=md-ellipsis> Property identityOptions </span> </a> </li> <li class=md-nav__item> <a href=#property-identitypollintervalms class=md-nav__link> <span class=md-ellipsis> Property identityPollIntervalMs </span> </a> </li> <li class=md-nav__item> <a href=#property-identitytimeoutms class=md-nav__link> <span class=md-ellipsis> Property identityTimeoutMs </span> </a> </li> <li class=md-nav__item> <a href=#property-invoiceexpiryseconds class=md-nav__link> <span class=md-ellipsis> Property invoiceExpirySeconds </span> </a> </li> <li class=md-nav__item> <a href=#property-receiptprovided class=md-nav__link> <span class=md-ellipsis> Property receiptProvided </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-remittancemanagerstate class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceManagerState </span> </a> </li> <li class=md-nav__item> <a href=#interface-remittancemodule class=md-nav__link> <span class=md-ellipsis> Interface: RemittanceModule </span> </a> <nav class=md-nav aria-label="Interface: RemittanceModule"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-acceptsettlement class=md-nav__link> <span class=md-ellipsis> Property acceptSettlement </span> </a> </li> <li class=md-nav__item> <a href=#property-allowunsolicitedsettlements class=md-nav__link> <span class=md-ellipsis> Property allowUnsolicitedSettlements </span> </a> </li> <li class=md-nav__item> <a href=#property-buildsettlement class=md-nav__link> <span class=md-ellipsis> Property buildSettlement </span> </a> </li> <li class=md-nav__item> <a href=#property-createoption class=md-nav__link> <span class=md-ellipsis> Property createOption </span> </a> </li> <li class=md-nav__item> <a href=#property-id_1 class=md-nav__link> <span class=md-ellipsis> Property id </span> </a> </li> <li class=md-nav__item> <a href=#property-name class=md-nav__link> <span class=md-ellipsis> Property name </span> </a> </li> <li class=md-nav__item> <a href=#property-processreceipt class=md-nav__link> <span class=md-ellipsis> Property processReceipt </span> </a> </li> <li class=md-nav__item> <a href=#property-processtermination class=md-nav__link> <span class=md-ellipsis> Property processTermination </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-settlement class=md-nav__link> <span class=md-ellipsis> Interface: Settlement </span> </a> </li> <li class=md-nav__item> <a href=#interface-termination class=md-nav__link> <span class=md-ellipsis> Interface: Termination </span> </a> <nav class=md-nav aria-label="Interface: Termination"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-code class=md-nav__link> <span class=md-ellipsis> Property code </span> </a> </li> <li class=md-nav__item> <a href=#property-details class=md-nav__link> <span class=md-ellipsis> Property details </span> </a> </li> <li class=md-nav__item> <a href=#property-message class=md-nav__link> <span class=md-ellipsis> Property message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-thread class=md-nav__link> <span class=md-ellipsis> Interface: Thread </span> </a> <nav class=md-nav aria-label="Interface: Thread"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-processedmessageids class=md-nav__link> <span class=md-ellipsis> Property processedMessageIds </span> </a> </li> <li class=md-nav__item> <a href=#property-protocollog class=md-nav__link> <span class=md-ellipsis> Property protocolLog </span> </a> </li> <li class=md-nav__item> <a href=#property-statelog class=md-nav__link> <span class=md-ellipsis> Property stateLog </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-unit class=md-nav__link> <span class=md-ellipsis> Interface: Unit </span> </a> <nav class=md-nav aria-label="Interface: Unit"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-code_1 class=md-nav__link> <span class=md-ellipsis> Property code </span> </a> </li> <li class=md-nav__item> <a href=#property-decimals class=md-nav__link> <span class=md-ellipsis> Property decimals </span> </a> </li> <li class=md-nav__item> <a href=#property-namespace class=md-nav__link> <span class=md-ellipsis> Property namespace </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#classes class=md-nav__link> <span class=md-ellipsis> Classes </span> </a> <nav class=md-nav aria-label=Classes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#class-brc29remittancemodule class=md-nav__link> <span class=md-ellipsis> Class: Brc29RemittanceModule </span> </a> </li> <li class=md-nav__item> <a href=#class-invoicehandle class=md-nav__link> <span class=md-ellipsis> Class: InvoiceHandle </span> </a> <nav class=md-nav aria-label="Class: InvoiceHandle"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#method-pay class=md-nav__link> <span class=md-ellipsis> Method pay </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#class-remittancemanager class=md-nav__link> <span class=md-ellipsis> Class: RemittanceManager </span> </a> <nav class=md-nav aria-label="Class: RemittanceManager"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#property-threads class=md-nav__link> <span class=md-ellipsis> Property threads </span> </a> </li> <li class=md-nav__item> <a href=#method-findinvoicespayable class=md-nav__link> <span class=md-ellipsis> Method findInvoicesPayable </span> </a> </li> <li class=md-nav__item> <a href=#method-findreceivableinvoices class=md-nav__link> <span class=md-ellipsis> Method findReceivableInvoices </span> </a> </li> <li class=md-nav__item> <a href=#method-getthread class=md-nav__link> <span class=md-ellipsis> Method getThread </span> </a> </li> <li class=md-nav__item> <a href=#method-getthreadhandle class=md-nav__link> <span class=md-ellipsis> Method getThreadHandle </span> </a> </li> <li class=md-nav__item> <a href=#method-getthreadorthrow class=md-nav__link> <span class=md-ellipsis> Method getThreadOrThrow </span> </a> </li> <li class=md-nav__item> <a href=#method-init class=md-nav__link> <span class=md-ellipsis> Method init </span> </a> </li> <li class=md-nav__item> <a href=#method-loadstate class=md-nav__link> <span class=md-ellipsis> Method loadState </span> </a> </li> <li class=md-nav__item> <a href=#method-onevent class=md-nav__link> <span class=md-ellipsis> Method onEvent </span> </a> </li> <li class=md-nav__item> <a href=#method-pay_1 class=md-nav__link> <span class=md-ellipsis> Method pay </span> </a> </li> <li class=md-nav__item> <a href=#method-persiststate class=md-nav__link> <span class=md-ellipsis> Method persistState </span> </a> </li> <li class=md-nav__item> <a href=#method-preselectpaymentoption class=md-nav__link> <span class=md-ellipsis> Method preselectPaymentOption </span> </a> </li> <li class=md-nav__item> <a href=#method-savestate class=md-nav__link> <span class=md-ellipsis> Method saveState </span> </a> </li> <li class=md-nav__item> <a href=#method-sendinvoice class=md-nav__link> <span class=md-ellipsis> Method sendInvoice </span> </a> </li> <li class=md-nav__item> <a href=#method-sendinvoiceforthread class=md-nav__link> <span class=md-ellipsis> Method sendInvoiceForThread </span> </a> </li> <li class=md-nav__item> <a href=#method-sendunsolicitedsettlement class=md-nav__link> <span class=md-ellipsis> Method sendUnsolicitedSettlement </span> </a> </li> <li class=md-nav__item> <a href=#method-startlistening class=md-nav__link> <span class=md-ellipsis> Method startListening </span> </a> </li> <li class=md-nav__item> <a href=#method-syncthreads class=md-nav__link> <span class=md-ellipsis> Method syncThreads </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforidentity class=md-nav__link> <span class=md-ellipsis> Method waitForIdentity </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforreceipt class=md-nav__link> <span class=md-ellipsis> Method waitForReceipt </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforsettlement class=md-nav__link> <span class=md-ellipsis> Method waitForSettlement </span> </a> </li> <li class=md-nav__item> <a href=#method-waitforstate class=md-nav__link> <span class=md-ellipsis> Method waitForState </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#class-threadhandle class=md-nav__link> <span class=md-ellipsis> Class: ThreadHandle </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#functions class=md-nav__link> <span class=md-ellipsis> Functions </span> </a> </li> <li class=md-nav__item> <a href=#types class=md-nav__link> <span class=md-ellipsis> Types </span> </a> <nav class=md-nav aria-label=Types> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-remittanceevent class=md-nav__link> <span class=md-ellipsis> Type: RemittanceEvent </span> </a> </li> <li class=md-nav__item> <a href=#type-remittancekind class=md-nav__link> <span class=md-ellipsis> Type: RemittanceKind </span> </a> </li> <li class=md-nav__item> <a href=#type-remittanceoptionid class=md-nav__link> <span class=md-ellipsis> Type: RemittanceOptionId </span> </a> </li> <li class=md-nav__item> <a href=#type-remittancethreadstate class=md-nav__link> <span class=md-ellipsis> Type: RemittanceThreadState </span> </a> </li> <li class=md-nav__item> <a href=#type-threadid class=md-nav__link> <span class=md-ellipsis> Type: ThreadId </span> </a> </li> <li class=md-nav__item> <a href=#type-unixmillis class=md-nav__link> <span class=md-ellipsis> Type: UnixMillis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#enums class=md-nav__link> <span class=md-ellipsis> Enums </span> </a> </li> <li class=md-nav__item> <a href=#variables class=md-nav__link> <span class=md-ellipsis> Variables </span> </a> <nav class=md-nav aria-label=Variables> <ul class=md-nav__list> <li class=md-nav__item> <a href=#variable-default_remittance_messagebox class=md-nav__link> <span class=md-ellipsis> Variable: DEFAULT_REMITTANCE_MESSAGEBOX </span> </a> </li> <li class=md-nav__item> <a href=#variable-defaultlockingscriptprovider class=md-nav__link> <span class=md-ellipsis> Variable: DefaultLockingScriptProvider </span> </a> </li> <li class=md-nav__item> <a href=#variable-defaultnonceprovider class=md-nav__link> <span class=md-ellipsis> Variable: DefaultNonceProvider </span> </a> </li> <li class=md-nav__item> <a href=#variable-remittance_state_transitions class=md-nav__link> <span class=md-ellipsis> Variable: REMITTANCE_STATE_TRANSITIONS </span> </a> </li> <li class=md-nav__item> <a href=#variable-sat_unit class=md-nav__link> <span class=md-ellipsis> Variable: SAT_UNIT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=api>API</h1> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <h2 id=interfaces>Interfaces</h2> <table> <thead> <tr> <th></th> <th></th> <th></th> </tr> </thead> <tbody> <tr> <td><a href=#interface-amount>Amount</a></td> <td><a href=#interface-identityverificationresponse>IdentityVerificationResponse</a></td> <td><a href=#interface-remittanceenvelope>RemittanceEnvelope</a></td> </tr> <tr> <td><a href=#interface-brc29optionterms>Brc29OptionTerms</a></td> <td><a href=#interface-instrumentbase>InstrumentBase</a></td> <td><a href=#interface-remittanceeventhandlers>RemittanceEventHandlers</a></td> </tr> <tr> <td><a href=#interface-brc29receiptdata>Brc29ReceiptData</a></td> <td><a href=#interface-invoice>Invoice</a></td> <td><a href=#interface-remittancemanagerconfig>RemittanceManagerConfig</a></td> </tr> <tr> <td><a href=#interface-brc29remittancemoduleconfig>Brc29RemittanceModuleConfig</a></td> <td><a href=#interface-lineitem>LineItem</a></td> <td><a href=#interface-remittancemanagerruntimeoptions>RemittanceManagerRuntimeOptions</a></td> </tr> <tr> <td><a href=#interface-brc29settlementartifact>Brc29SettlementArtifact</a></td> <td><a href=#interface-lockingscriptprovider>LockingScriptProvider</a></td> <td><a href=#interface-remittancemanagerstate>RemittanceManagerState</a></td> </tr> <tr> <td><a href=#interface-commslayer>CommsLayer</a></td> <td><a href=#interface-loggerlike>LoggerLike</a></td> <td><a href=#interface-remittancemodule>RemittanceModule</a></td> </tr> <tr> <td><a href=#interface-composeinvoiceinput>ComposeInvoiceInput</a></td> <td><a href=#interface-modulecontext>ModuleContext</a></td> <td><a href=#interface-settlement>Settlement</a></td> </tr> <tr> <td><a href=#interface-identitylayer>IdentityLayer</a></td> <td><a href=#interface-nonceprovider>NonceProvider</a></td> <td><a href=#interface-termination>Termination</a></td> </tr> <tr> <td><a href=#interface-identityverificationacknowledgment>IdentityVerificationAcknowledgment</a></td> <td><a href=#interface-peermessage>PeerMessage</a></td> <td><a href=#interface-thread>Thread</a></td> </tr> <tr> <td><a href=#interface-identityverificationrequest>IdentityVerificationRequest</a></td> <td><a href=#interface-receipt>Receipt</a></td> <td><a href=#interface-unit>Unit</a></td> </tr> </tbody> </table> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-amount>Interface: Amount</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Amount</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=nx>value</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=nx>unit</span><span class=o>:</span><span class=w> </span><span class=kt>Unit</span><span class=p>;</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-unit>Unit</a></p> <h4 id=property-value>Property value</h4> <p>Decimal string. Avoid floats at the protocol layer.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nx>value</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-brc29optionterms>Interface: Brc29OptionTerms</h3> <p>BRC-29-like payment option terms.</p> <p>This module intentionally keeps option terms minimal: - Amount is taken from the invoice total (and validated as satoshis) - The payer derives the payee's per-payment public key using wallet.getPublicKey with a stable protocolID</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Brc29OptionTerms</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=nx>amountSatoshis</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=nx>payee</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=nx>outputIndex?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>    </span><span class=nx>protocolID?</span><span class=o>:</span><span class=w> </span><span class=kt>WalletProtocol</span><span class=p>;</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=nx>labels?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>    </span><span class=nx>description?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=../wallet/#type-walletprotocol>WalletProtocol</a></p> <h4 id=property-amountsatoshis>Property amountSatoshis</h4> <p>Payment amount in satoshis.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nx>amountSatoshis</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-description>Property description</h4> <p>Optional description for createAction.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nx>description?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-labels>Property labels</h4> <p>Optional labels for createAction.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nx>labels?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[]</span>
</code></pre></div> <h4 id=property-outputindex>Property outputIndex</h4> <p>Which output index to internalize, default 0.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nx>outputIndex?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-payee>Property payee</h4> <p>The recipient of the payment</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nx>payee</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span>
</code></pre></div> See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <h4 id=property-protocolid>Property protocolID</h4> <p>Optionally override the protocolID used in getPublicKey.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nx>protocolID?</span><span class=o>:</span><span class=w> </span><span class=kt>WalletProtocol</span>
</code></pre></div> See also: <a href=../wallet/#type-walletprotocol>WalletProtocol</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-brc29receiptdata>Interface: Brc29ReceiptData</h3> <p>Receipt data for BRC-29 settlements.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Brc29ReceiptData</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=nx>internalizeResult?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=nx>rejectedReason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nx>refund</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>        </span><span class=nx>token</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29SettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>        </span><span class=nx>feeSatoshis</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-brc29settlementartifact>Brc29SettlementArtifact</a></p> <h4 id=property-internalizeresult>Property internalizeResult</h4> <p>Result returned from wallet.internalizeAction, if accepted.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nx>internalizeResult?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span>
</code></pre></div> <h4 id=property-refund>Property refund</h4> <p>If rejected with refund, contains the refund payment token.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nx>refund</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class=nx>token</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29SettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class=nx>feeSatoshis</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=p>}</span>
</code></pre></div> See also: <a href=./#interface-brc29settlementartifact>Brc29SettlementArtifact</a></p> <h4 id=property-rejectedreason>Property rejectedReason</h4> <p>Human-readable rejection reason, if rejected.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nx>rejectedReason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-brc29remittancemoduleconfig>Interface: Brc29RemittanceModuleConfig</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Brc29RemittanceModuleConfig</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class=nx>protocolID?</span><span class=o>:</span><span class=w> </span><span class=kt>WalletProtocol</span><span class=p>;</span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=nx>labels?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=nx>description?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span><span class=nx>outputDescription?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=nx>refundFeeSatoshis?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>    </span><span class=nx>minRefundSatoshis?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>    </span><span class=nx>internalizeProtocol</span><span class=o>?:</span><span class=w> </span><span class=s2>&quot;wallet payment&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;basket insertion&quot;</span><span class=p>;</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>    </span><span class=nx>nonceProvider?</span><span class=o>:</span><span class=w> </span><span class=kt>NonceProvider</span><span class=p>;</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>    </span><span class=nx>lockingScriptProvider?</span><span class=o>:</span><span class=w> </span><span class=kt>LockingScriptProvider</span><span class=p>;</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-lockingscriptprovider>LockingScriptProvider</a>, <a href=./#interface-nonceprovider>NonceProvider</a>, <a href=../wallet/#type-walletprotocol>WalletProtocol</a></p> <h4 id=property-description_1>Property description</h4> <p>Description applied to created actions.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=nx>description?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-internalizeprotocol>Property internalizeProtocol</h4> <p>How wallet internalizes the payment.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nx>internalizeProtocol</span><span class=o>?:</span><span class=w> </span><span class=s2>&quot;wallet payment&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;basket insertion&quot;</span>
</code></pre></div> <h4 id=property-labels_1>Property labels</h4> <p>Labels applied to created actions.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nx>labels?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[]</span>
</code></pre></div> <h4 id=property-minrefundsatoshis>Property minRefundSatoshis</h4> <p>Minimum refund to issue. If refund would be smaller, module will reject without refund.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nx>minRefundSatoshis?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-outputdescription>Property outputDescription</h4> <p>Output description for created actions.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=nx>outputDescription?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-protocolid_1>Property protocolID</h4> <p>Default protocolID to use with wallet.getPublicKey.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nx>protocolID?</span><span class=o>:</span><span class=w> </span><span class=kt>WalletProtocol</span>
</code></pre></div> See also: <a href=../wallet/#type-walletprotocol>WalletProtocol</a></p> <h4 id=property-refundfeesatoshis>Property refundFeeSatoshis</h4> <p>Fee charged on refunds, in satoshis.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=nx>refundFeeSatoshis?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-brc29settlementartifact>Interface: Brc29SettlementArtifact</h3> <p>Settlement artifact carried in the settlement message.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Brc29SettlementArtifact</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>    </span><span class=nx>customInstructions</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>        </span><span class=nx>derivationPrefix</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>        </span><span class=nx>derivationSuffix</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=nx>transaction</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>[];</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span><span class=nx>amountSatoshis</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span><span class=nx>outputIndex?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=p>}</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-commslayer>Interface: CommsLayer</h3> <p>Abstract communications layer.</p> <p>This intentionally mirrors the essential subset of message-box-client / MessageBoxClient. RemittanceManager never talks directly to HTTP/WebSockets  it only uses this interface.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>CommsLayer</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>    </span><span class=nx>sendMessage</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>        </span><span class=nx>recipient</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>        </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>        </span><span class=nx>body</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=nx>sendLiveMessage</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>        </span><span class=nx>recipient</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>        </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=w>        </span><span class=nx>body</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=w>    </span><span class=nx>listMessages</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=w>        </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=w>        </span><span class=nx>host?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=w>    </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>PeerMessage</span><span class=p>[]</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a><span class=w>    </span><span class=nx>acknowledgeMessage</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a><span class=w>        </span><span class=nx>messageIds</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
<a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a><span class=w>    </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-22-19 name=__codelineno-22-19 href=#__codelineno-22-19></a><span class=w>    </span><span class=nx>listenForLiveMessages</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-22-20 name=__codelineno-22-20 href=#__codelineno-22-20></a><span class=w>        </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-21 name=__codelineno-22-21 href=#__codelineno-22-21></a><span class=w>        </span><span class=nx>overrideHost?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-22-22 name=__codelineno-22-22 href=#__codelineno-22-22></a><span class=w>        </span><span class=nx>onMessage</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>msg</span><span class=o>:</span><span class=w> </span><span class=kt>PeerMessage</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-22-23 name=__codelineno-22-23 href=#__codelineno-22-23></a><span class=w>    </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-22-24 name=__codelineno-22-24 href=#__codelineno-22-24></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-peermessage>PeerMessage</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <h4 id=property-acknowledgemessage>Property acknowledgeMessage</h4> <p>Acknowledges messages (deletes them from the server / inbox).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=nx>acknowledgeMessage</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>    </span><span class=nx>messageIds</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span>
</code></pre></div> <h4 id=property-listmessages>Property listMessages</h4> <p>Lists pending messages for a message box.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=nx>listMessages</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=w>    </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=w>    </span><span class=nx>host?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>PeerMessage</span><span class=p>[]</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-peermessage>PeerMessage</a></p> <h4 id=property-listenforlivemessages>Property listenForLiveMessages</h4> <p>Optional live listener.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=nx>listenForLiveMessages</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=w>    </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>    </span><span class=nx>overrideHost?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>    </span><span class=nx>onMessage</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>msg</span><span class=o>:</span><span class=w> </span><span class=kt>PeerMessage</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-peermessage>PeerMessage</a></p> <h4 id=property-sendlivemessage>Property sendLiveMessage</h4> <p>Sends a message over the live channel (e.g. WebSocket). Returns the transport messageId. Implementers may throw if live sending is not possible. RemittanceManager will fall back to sendMessage where appropriate.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=nx>sendLiveMessage</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>    </span><span class=nx>recipient</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>    </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=w>    </span><span class=nx>body</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=p>},</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <h4 id=property-sendmessage>Property sendMessage</h4> <p>Sends a message over the store-and-forward channel. Returns the transport messageId.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=nx>sendMessage</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=w>    </span><span class=nx>recipient</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=w>    </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=w>    </span><span class=nx>body</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=p>},</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-composeinvoiceinput>Interface: ComposeInvoiceInput</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>ComposeInvoiceInput</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>    </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>    </span><span class=nx>lineItems</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>[</span><span class=s2>&quot;lineItems&quot;</span><span class=p>];</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>    </span><span class=nx>total</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>[</span><span class=s2>&quot;total&quot;</span><span class=p>];</span>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>    </span><span class=nx>invoiceNumber?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>    </span><span class=nx>arbitrary?</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>unknown</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-invoice>Invoice</a></p> <h4 id=property-lineitems>Property lineItems</h4> <p>Line items.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=nx>lineItems</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>[</span><span class=s2>&quot;lineItems&quot;</span><span class=p>]</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a></p> <h4 id=property-note>Property note</h4> <p>Human note/memo.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-total>Property total</h4> <p>Total amount.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=nx>total</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>[</span><span class=s2>&quot;total&quot;</span><span class=p>]</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-identitylayer>Interface: IdentityLayer</h3> <p>The Identity Layer handles identity certificate exchange and verification. It is optional and pluggable. Modules can use it to request/verify identity before accepting settlements.</p> <p>The runtime configuration can be used to determine whether and at what point identity exchange occurs: before invoicing, before settlement, etc.</p> <p>Makers and takers can both implement this layer as needed, and request/respond to identity verification at different points in the protocol.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>IdentityLayer</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=w>    </span><span class=nx>determineCertificatesToRequest</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>        </span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>IdentityVerificationRequest</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=w>    </span><span class=nx>respondToRequest</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=w>        </span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=w>        </span><span class=nx>request</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationRequest</span><span class=p>;</span>
<a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;respond&quot;</span><span class=p>;</span>
<a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class=w>        </span><span class=nx>response</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>;</span>
<a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class=w>        </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class=w>    </span><span class=nx>assessReceivedCertificateSufficiency</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>,</span><span class=w> </span><span class=nx>received</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>,</span><span class=w> </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>IdentityVerificationAcknowledgment</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-identityverificationacknowledgment>IdentityVerificationAcknowledgment</a>, <a href=./#interface-identityverificationrequest>IdentityVerificationRequest</a>, <a href=./#interface-identityverificationresponse>IdentityVerificationResponse</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-assessreceivedcertificatesufficiency>Property assessReceivedCertificateSufficiency</h4> <p>Assess whether received certificates satisfy the requirements for transaction settlement.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=nx>assessReceivedCertificateSufficiency</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>,</span><span class=w> </span><span class=nx>received</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>,</span><span class=w> </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>IdentityVerificationAcknowledgment</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-identityverificationacknowledgment>IdentityVerificationAcknowledgment</a>, <a href=./#interface-identityverificationresponse>IdentityVerificationResponse</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-determinecertificatestorequest>Property determineCertificatesToRequest</h4> <p>Determine which certificates to request from a counterparty.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=nx>determineCertificatesToRequest</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=w>    </span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>IdentityVerificationRequest</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-identityverificationrequest>IdentityVerificationRequest</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-respondtorequest>Property respondToRequest</h4> <p>Respond to an incoming identity verification request.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=nx>respondToRequest</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=w>    </span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=w>    </span><span class=nx>request</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationRequest</span><span class=p>;</span>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;respond&quot;</span><span class=p>;</span>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=w>    </span><span class=nx>response</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>;</span>
<a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=w>    </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=p>}</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-identityverificationrequest>IdentityVerificationRequest</a>, <a href=./#interface-identityverificationresponse>IdentityVerificationResponse</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-identityverificationacknowledgment>Interface: IdentityVerificationAcknowledgment</h3> <p>An identity verification acknowledgment.</p> <p>A simple ack message indicating that a requested identity verification has been completed successfully.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>IdentityVerificationAcknowledgment</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityVerificationAcknowledgment&quot;</span><span class=p>;</span>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-identityverificationrequest>Interface: IdentityVerificationRequest</h3> <p>An identity certificate request.</p> <p>Contains a list of requested certificate types, fields from each, plus acceptable certifiers.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>IdentityVerificationRequest</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityVerificationRequest&quot;</span><span class=p>;</span>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=w>    </span><span class=nx>request</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=w>        </span><span class=nx>types</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=kt>string</span><span class=p>[]</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=w>        </span><span class=nx>certifiers</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>[];</span>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-request>Property request</h4> <p>Details of the requested certificates.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=nx>request</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>    </span><span class=nx>types</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=kt>string</span><span class=p>[]</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>    </span><span class=nx>certifiers</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>[];</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=p>}</span>
</code></pre></div> See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-identityverificationresponse>Interface: IdentityVerificationResponse</h3> <p>An identity certificate response.</p> <p>Contains certificates issued by the certifiers named in the corresponding request, with fields revealed to the counterparty.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>IdentityVerificationResponse</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityVerificationResponse&quot;</span><span class=p>;</span>
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=w>    </span><span class=nx>certificates</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=nx>Base64String</span><span class=p>;</span>
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=w>        </span><span class=nx>certifier</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=w>        </span><span class=nx>subject</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=w>        </span><span class=nx>fields</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Base64String</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a><span class=w>        </span><span class=nx>signature</span><span class=o>:</span><span class=w> </span><span class=kt>HexString</span><span class=p>;</span>
<a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=w>        </span><span class=nx>serialNumber</span><span class=o>:</span><span class=w> </span><span class=kt>Base64String</span><span class=p>;</span>
<a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a><span class=w>        </span><span class=nx>revocationOutpoint</span><span class=o>:</span><span class=w> </span><span class=kt>OutpointString</span><span class=p>;</span>
<a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a><span class=w>        </span><span class=nx>keyringForVerifier</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Base64String</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-base64string>Base64String</a>, <a href=../wallet/#type-hexstring>HexString</a>, <a href=../wallet/#type-outpointstring>OutpointString</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-certificates>Property certificates</h4> <p>List of certificates issued by the certifiers named in the corresponding request, with fields revealed to the counterparty.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=nx>certificates</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=nx>Base64String</span><span class=p>;</span>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=w>    </span><span class=nx>certifier</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=w>    </span><span class=nx>subject</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=w>    </span><span class=nx>fields</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Base64String</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=w>    </span><span class=nx>signature</span><span class=o>:</span><span class=w> </span><span class=kt>HexString</span><span class=p>;</span>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=w>    </span><span class=nx>serialNumber</span><span class=o>:</span><span class=w> </span><span class=kt>Base64String</span><span class=p>;</span>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=w>    </span><span class=nx>revocationOutpoint</span><span class=o>:</span><span class=w> </span><span class=kt>OutpointString</span><span class=p>;</span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=w>    </span><span class=nx>keyringForVerifier</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Base64String</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=p>}</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=../wallet/#type-base64string>Base64String</a>, <a href=../wallet/#type-hexstring>HexString</a>, <a href=../wallet/#type-outpointstring>OutpointString</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-instrumentbase>Interface: InstrumentBase</h3> <p>Shared commercial/metadata fields for invoice and receipt-like instruments.</p> <p>NOTE: "payee" and "payer" are identity keys, not addresses. Payment addresses / scripts are settlement-module concerns.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>InstrumentBase</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=w>    </span><span class=nx>payee</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>    </span><span class=nx>payer</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=w>    </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=w>    </span><span class=nx>lineItems</span><span class=o>:</span><span class=w> </span><span class=kt>LineItem</span><span class=p>[];</span>
<a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=w>    </span><span class=nx>total</span><span class=o>:</span><span class=w> </span><span class=kt>Amount</span><span class=p>;</span>
<a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=w>    </span><span class=nx>invoiceNumber</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=w>    </span><span class=nx>arbitrary?</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>unknown</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-amount>Amount</a>, <a href=./#interface-lineitem>LineItem</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-threadid>ThreadId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-invoice>Interface: Invoice</h3> <p>Invoice (solicitation) that contains N remittance options.</p> <p>Each remittance option is keyed by a module id. The payload for each option is module-defined and opaque to the core.</p> <p>This is where UTXO offers live: a module option payload can include a partial tx template, UTXO references, scripts, overlay anchors, SPV, etc. The manager does not interpret them.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Invoice</span><span class=w> </span><span class=k>extends</span><span class=w> </span><span class=nx>InstrumentBase</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;invoice&quot;</span><span class=p>;</span>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=w>    </span><span class=nx>expiresAt?</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=w>    </span><span class=nx>options</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=nx>RemittanceOptionId</span><span class=p>,</span><span class=w> </span><span class=nx>unknown</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-instrumentbase>InstrumentBase</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-lineitem>Interface: LineItem</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>LineItem</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>    </span><span class=nx>id?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>    </span><span class=nx>description</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=w>    </span><span class=nx>quantity?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=w>    </span><span class=nx>unitPrice?</span><span class=o>:</span><span class=w> </span><span class=kt>Amount</span><span class=p>;</span>
<a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=w>    </span><span class=nx>amount?</span><span class=o>:</span><span class=w> </span><span class=kt>Amount</span><span class=p>;</span>
<a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=w>    </span><span class=nx>metadata?</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>unknown</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-amount>Amount</a></p> <h4 id=property-amount>Property amount</h4> <p>Total amount for the line (optional if derivable).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=nx>amount?</span><span class=o>:</span><span class=w> </span><span class=kt>Amount</span>
</code></pre></div> See also: <a href=./#interface-amount>Amount</a></p> <h4 id=property-quantity>Property quantity</h4> <p>Decimal string, e.g. '1', '2', '0.5'.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=nx>quantity?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-lockingscriptprovider>Interface: LockingScriptProvider</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>LockingScriptProvider</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=w>    </span><span class=nx>pubKeyToP2PKHLockingScript</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>publicKey</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=p>}</span>
</code></pre></div> <h4 id=property-pubkeytop2pkhlockingscript>Property pubKeyToP2PKHLockingScript</h4> <p>Converts a public key string to a P2PKH locking script hex.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=nx>pubKeyToP2PKHLockingScript</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>publicKey</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-loggerlike>Interface: LoggerLike</h3> <p>Simple logger interface.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>LoggerLike</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=w>    </span><span class=nx>log</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>...args</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>[])</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=w>    </span><span class=nx>warn</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>...args</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>[])</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=w>    </span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>...args</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>[])</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=p>}</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-modulecontext>Interface: ModuleContext</h3> <p>Context object passed to module methods.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>ModuleContext</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=w>    </span><span class=nx>wallet</span><span class=o>:</span><span class=w> </span><span class=kt>WalletInterface</span><span class=p>;</span>
<a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=w>    </span><span class=nx>originator?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=w>    </span><span class=nx>now</span><span class=o>:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=w>    </span><span class=nx>logger?</span><span class=o>:</span><span class=w> </span><span class=kt>LoggerLike</span><span class=p>;</span>
<a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-loggerlike>LoggerLike</a>, <a href=../wallet/#interface-walletinterface>WalletInterface</a></p> <h4 id=property-originator>Property originator</h4> <p>Optional originator domain forwarded to wallet methods.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=nx>originator?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-nonceprovider>Interface: NonceProvider</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>NonceProvider</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=w>    </span><span class=nx>createNonce</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>wallet</span><span class=o>:</span><span class=w> </span><span class=kt>WalletInterface</span><span class=p>,</span><span class=w> </span><span class=nx>scope</span><span class=o>:</span><span class=w> </span><span class=kt>WalletCounterparty</span><span class=p>,</span><span class=w> </span><span class=nx>originator?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-walletcounterparty>WalletCounterparty</a>, <a href=../wallet/#interface-walletinterface>WalletInterface</a>, <a href=../auth/#function-createnonce>createNonce</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-peermessage>Interface: PeerMessage</h3> <p>Transport message format expected from the CommsLayer.</p> <p>It closely matches the message-box-client shapes: messageId, sender, body, etc.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>PeerMessage</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a><span class=w>    </span><span class=nx>messageId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=w>    </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=w>    </span><span class=nx>recipient</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=w>    </span><span class=nx>messageBox</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a><span class=w>    </span><span class=nx>body</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-receipt>Interface: Receipt</h3> <p>Receipt issued by the payee (or service provider).</p> <p>A receipt could be a PDF, a photo/oroof-of-delivery, a copy of the payment transaction, etc.</p> <p>A receipt should NOT be issued when a settlement is rejected/failed. Use a Termination instead.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Receipt</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;receipt&quot;</span><span class=p>;</span>
<a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=w>    </span><span class=kr>module</span><span class=nx>Id</span><span class=o>:</span><span class=w> </span><span class=nx>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=w>    </span><span class=nx>optionId</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a><span class=w>    </span><span class=nx>payee</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=w>    </span><span class=nx>payer</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a><span class=w>    </span><span class=nx>receiptData</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#type-threadid>ThreadId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-remittanceenvelope>Interface: RemittanceEnvelope</h3> <p>Protocol envelope.</p> <p>This is what RemittanceManager serializes into the CommsLayer message body.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>RemittanceEnvelope</span><span class=o>&lt;</span><span class=nx>K</span><span class=w> </span><span class=k>extends</span><span class=w> </span><span class=nx>RemittanceKind</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>RemittanceKind</span><span class=p>,</span><span class=w> </span><span class=nx>P</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>unknown</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a><span class=w>    </span><span class=nx>v</span><span class=o>:</span><span class=w> </span><span class=kt>1</span><span class=p>;</span>
<a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=w>    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=kt>K</span><span class=p>;</span>
<a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a><span class=w>    </span><span class=nx>payload</span><span class=o>:</span><span class=w> </span><span class=kt>P</span><span class=p>;</span>
<a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#type-remittancekind>RemittanceKind</a>, <a href=./#type-threadid>ThreadId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <h4 id=property-id>Property id</h4> <p>Envelope id (idempotency key). Not the transport messageId.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-v>Property v</h4> <p>Protocol version.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=nx>v</span><span class=o>:</span><span class=w> </span><span class=kt>1</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-remittanceeventhandlers>Interface: RemittanceEventHandlers</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>RemittanceEventHandlers</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=w>    </span><span class=nx>onThreadCreated</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;threadCreated&quot;</span><span class=p>;</span>
<a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=w>    </span><span class=nx>onStateChanged</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;stateChanged&quot;</span><span class=p>;</span>
<a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=w>    </span><span class=nx>onEnvelopeSent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;envelopeSent&quot;</span><span class=p>;</span>
<a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=w>    </span><span class=nx>onEnvelopeReceived</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;envelopeReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a><span class=w>    </span><span class=nx>onIdentityRequested</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityRequested&quot;</span><span class=p>;</span>
<a id=__codelineno-57-16 name=__codelineno-57-16 href=#__codelineno-57-16></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-17 name=__codelineno-57-17 href=#__codelineno-57-17></a><span class=w>    </span><span class=nx>onIdentityResponded</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-18 name=__codelineno-57-18 href=#__codelineno-57-18></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityResponded&quot;</span><span class=p>;</span>
<a id=__codelineno-57-19 name=__codelineno-57-19 href=#__codelineno-57-19></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-20 name=__codelineno-57-20 href=#__codelineno-57-20></a><span class=w>    </span><span class=nx>onIdentityAcknowledged</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-21 name=__codelineno-57-21 href=#__codelineno-57-21></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityAcknowledged&quot;</span><span class=p>;</span>
<a id=__codelineno-57-22 name=__codelineno-57-22 href=#__codelineno-57-22></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-23 name=__codelineno-57-23 href=#__codelineno-57-23></a><span class=w>    </span><span class=nx>onInvoiceSent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-24 name=__codelineno-57-24 href=#__codelineno-57-24></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;invoiceSent&quot;</span><span class=p>;</span>
<a id=__codelineno-57-25 name=__codelineno-57-25 href=#__codelineno-57-25></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-26 name=__codelineno-57-26 href=#__codelineno-57-26></a><span class=w>    </span><span class=nx>onInvoiceReceived</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-27 name=__codelineno-57-27 href=#__codelineno-57-27></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;invoiceReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-57-28 name=__codelineno-57-28 href=#__codelineno-57-28></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-29 name=__codelineno-57-29 href=#__codelineno-57-29></a><span class=w>    </span><span class=nx>onSettlementSent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-30 name=__codelineno-57-30 href=#__codelineno-57-30></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settlementSent&quot;</span><span class=p>;</span>
<a id=__codelineno-57-31 name=__codelineno-57-31 href=#__codelineno-57-31></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-32 name=__codelineno-57-32 href=#__codelineno-57-32></a><span class=w>    </span><span class=nx>onSettlementReceived</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-33 name=__codelineno-57-33 href=#__codelineno-57-33></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settlementReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-57-34 name=__codelineno-57-34 href=#__codelineno-57-34></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-35 name=__codelineno-57-35 href=#__codelineno-57-35></a><span class=w>    </span><span class=nx>onReceiptSent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-36 name=__codelineno-57-36 href=#__codelineno-57-36></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;receiptSent&quot;</span><span class=p>;</span>
<a id=__codelineno-57-37 name=__codelineno-57-37 href=#__codelineno-57-37></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-38 name=__codelineno-57-38 href=#__codelineno-57-38></a><span class=w>    </span><span class=nx>onReceiptReceived</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-39 name=__codelineno-57-39 href=#__codelineno-57-39></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;receiptReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-57-40 name=__codelineno-57-40 href=#__codelineno-57-40></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-41 name=__codelineno-57-41 href=#__codelineno-57-41></a><span class=w>    </span><span class=nx>onTerminationSent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-42 name=__codelineno-57-42 href=#__codelineno-57-42></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminationSent&quot;</span><span class=p>;</span>
<a id=__codelineno-57-43 name=__codelineno-57-43 href=#__codelineno-57-43></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-44 name=__codelineno-57-44 href=#__codelineno-57-44></a><span class=w>    </span><span class=nx>onTerminationReceived</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-45 name=__codelineno-57-45 href=#__codelineno-57-45></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminationReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-57-46 name=__codelineno-57-46 href=#__codelineno-57-46></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-47 name=__codelineno-57-47 href=#__codelineno-57-47></a><span class=w>    </span><span class=nx>onError</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>Extract</span><span class=o>&lt;</span><span class=nx>RemittanceEvent</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-57-48 name=__codelineno-57-48 href=#__codelineno-57-48></a><span class=w>        </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>;</span>
<a id=__codelineno-57-49 name=__codelineno-57-49 href=#__codelineno-57-49></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-57-50 name=__codelineno-57-50 href=#__codelineno-57-50></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#type-remittanceevent>RemittanceEvent</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-remittancemanagerconfig>Interface: RemittanceManagerConfig</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>RemittanceManagerConfig</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a><span class=w>    </span><span class=nx>messageBox?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=w>    </span><span class=nx>originator?</span><span class=o>:</span><span class=w> </span><span class=kt>OriginatorDomainNameStringUnder250Bytes</span><span class=p>;</span>
<a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=w>    </span><span class=nx>logger?</span><span class=o>:</span><span class=w> </span><span class=kt>LoggerLike</span><span class=p>;</span>
<a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a><span class=w>    </span><span class=nx>options?</span><span class=o>:</span><span class=w> </span><span class=kt>Partial</span><span class=o>&lt;</span><span class=nx>RemittanceManagerRuntimeOptions</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=w>    </span><span class=nx>remittanceModules</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=nx>RemittanceModule</span><span class=o>&lt;</span><span class=nx>any</span><span class=p>,</span><span class=w> </span><span class=nx>any</span><span class=p>,</span><span class=w> </span><span class=nx>any</span><span class=o>&gt;&gt;</span><span class=p>;</span>
<a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=w>    </span><span class=nx>identityLayer?</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityLayer</span><span class=p>;</span>
<a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a><span class=w>    </span><span class=nx>onEvent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=w>    </span><span class=nx>events?</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEventHandlers</span><span class=p>;</span>
<a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a><span class=w>    </span><span class=nx>stateSaver</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManagerState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=ow>void</span><span class=p>;</span>
<a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a><span class=w>    </span><span class=nx>stateLoader</span><span class=o>?:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>RemittanceManagerState</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=o>&gt;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>RemittanceManagerState</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=p>;</span>
<a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a><span class=w>    </span><span class=nx>now</span><span class=o>?:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-58-13 name=__codelineno-58-13 href=#__codelineno-58-13></a><span class=w>    </span><span class=nx>threadIdFactory</span><span class=o>?:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>ThreadId</span><span class=p>;</span>
<a id=__codelineno-58-14 name=__codelineno-58-14 href=#__codelineno-58-14></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-identitylayer>IdentityLayer</a>, <a href=./#interface-loggerlike>LoggerLike</a>, <a href=../wallet/#type-originatordomainnamestringunder250bytes>OriginatorDomainNameStringUnder250Bytes</a>, <a href=./#type-remittanceevent>RemittanceEvent</a>, <a href=./#interface-remittanceeventhandlers>RemittanceEventHandlers</a>, <a href=./#interface-remittancemanagerruntimeoptions>RemittanceManagerRuntimeOptions</a>, <a href=./#interface-remittancemanagerstate>RemittanceManagerState</a>, <a href=./#interface-remittancemodule>RemittanceModule</a>, <a href=./#type-threadid>ThreadId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <h4 id=property-events>Property events</h4> <p>Optional event callbacks keyed by process.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=nx>events?</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEventHandlers</span>
</code></pre></div> See also: <a href=./#interface-remittanceeventhandlers>RemittanceEventHandlers</a></p> <h4 id=property-identitylayer>Property identityLayer</h4> <p>Optional identity layer for exchanging certificates before transacting.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=nx>identityLayer?</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityLayer</span>
</code></pre></div> See also: <a href=./#interface-identitylayer>IdentityLayer</a></p> <h4 id=property-logger>Property logger</h4> <p>Provide a logger. If omitted, RemittanceManager stays quiet.</p> <p>The manager itself never throws on network/message parsing errors; it will mark threads as errored.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=nx>logger?</span><span class=o>:</span><span class=w> </span><span class=kt>LoggerLike</span>
</code></pre></div> See also: <a href=./#interface-loggerlike>LoggerLike</a></p> <h4 id=property-messagebox>Property messageBox</h4> <p>Optional message box name to use for communication.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=nx>messageBox?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-now>Property now</h4> <p>Injectable clock for tests.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=nx>now</span><span class=o>?:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>UnixMillis</span>
</code></pre></div> See also: <a href=./#type-unixmillis>UnixMillis</a></p> <h4 id=property-onevent>Property onEvent</h4> <p>Optional event callback for remittance lifecycle events.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=nx>onEvent</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span>
</code></pre></div> See also: <a href=./#type-remittanceevent>RemittanceEvent</a></p> <h4 id=property-options>Property options</h4> <p>Runtime options that influence core behavior.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=nx>options?</span><span class=o>:</span><span class=w> </span><span class=kt>Partial</span><span class=o>&lt;</span><span class=nx>RemittanceManagerRuntimeOptions</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-remittancemanagerruntimeoptions>RemittanceManagerRuntimeOptions</a></p> <h4 id=property-originator_1>Property originator</h4> <p>Optional originator forwarded to wallet APIs.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=nx>originator?</span><span class=o>:</span><span class=w> </span><span class=kt>OriginatorDomainNameStringUnder250Bytes</span>
</code></pre></div> See also: <a href=../wallet/#type-originatordomainnamestringunder250bytes>OriginatorDomainNameStringUnder250Bytes</a></p> <h4 id=property-remittancemodules>Property remittanceModules</h4> <p>Modules (remittance options) available to this manager.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=nx>remittanceModules</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=nx>RemittanceModule</span><span class=o>&lt;</span><span class=nx>any</span><span class=p>,</span><span class=w> </span><span class=nx>any</span><span class=p>,</span><span class=w> </span><span class=nx>any</span><span class=o>&gt;&gt;</span>
</code></pre></div> See also: <a href=./#interface-remittancemodule>RemittanceModule</a></p> <h4 id=property-stateloader>Property stateLoader</h4> <p>Load manager state (threads).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=nx>stateLoader</span><span class=o>?:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>RemittanceManagerState</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=o>&gt;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>RemittanceManagerState</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span>
</code></pre></div> See also: <a href=./#interface-remittancemanagerstate>RemittanceManagerState</a></p> <h4 id=property-statesaver>Property stateSaver</h4> <p>Persist manager state (threads).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=nx>stateSaver</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManagerState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=ow>void</span>
</code></pre></div> See also: <a href=./#interface-remittancemanagerstate>RemittanceManagerState</a></p> <h4 id=property-threadidfactory>Property threadIdFactory</h4> <p>Injectable thread id factory for tests.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=nx>threadIdFactory</span><span class=o>?:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>ThreadId</span>
</code></pre></div> See also: <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-remittancemanagerruntimeoptions>Interface: RemittanceManagerRuntimeOptions</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>RemittanceManagerRuntimeOptions</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>    </span><span class=nx>identityOptions</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>        </span><span class=nx>makerRequestIdentity</span><span class=o>?:</span><span class=w> </span><span class=s2>&quot;never&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeInvoicing&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeSettlement&quot;</span><span class=p>;</span>
<a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=w>        </span><span class=nx>takerRequestIdentity</span><span class=o>?:</span><span class=w> </span><span class=s2>&quot;never&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeInvoicing&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeSettlement&quot;</span><span class=p>;</span>
<a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a><span class=w>    </span><span class=nx>receiptProvided</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=w>    </span><span class=nx>autoIssueReceipt</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=w>    </span><span class=nx>invoiceExpirySeconds</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=w>    </span><span class=nx>identityTimeoutMs</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-71-10 name=__codelineno-71-10 href=#__codelineno-71-10></a><span class=w>    </span><span class=nx>identityPollIntervalMs</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-71-11 name=__codelineno-71-11 href=#__codelineno-71-11></a><span class=p>}</span>
</code></pre></div> <h4 id=property-autoissuereceipt>Property autoIssueReceipt</h4> <p>If true, manager auto-sends receipts as soon as a settlement is processed.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=nx>autoIssueReceipt</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span>
</code></pre></div> <h4 id=property-identityoptions>Property identityOptions</h4> <p>Identity verification options.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=nx>identityOptions</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>    </span><span class=nx>makerRequestIdentity</span><span class=o>?:</span><span class=w> </span><span class=s2>&quot;never&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeInvoicing&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeSettlement&quot;</span><span class=p>;</span>
<a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=w>    </span><span class=nx>takerRequestIdentity</span><span class=o>?:</span><span class=w> </span><span class=s2>&quot;never&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeInvoicing&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;beforeSettlement&quot;</span><span class=p>;</span>
<a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a><span class=p>}</span>
</code></pre></div> <h4 id=property-identitypollintervalms>Property identityPollIntervalMs</h4> <p>Identity verification poll interval in milliseconds.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=nx>identityPollIntervalMs</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-identitytimeoutms>Property identityTimeoutMs</h4> <p>Identity verification timeout in milliseconds.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=nx>identityTimeoutMs</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-invoiceexpiryseconds>Property invoiceExpirySeconds</h4> <p>Invoice expiry in seconds, or -1 for no expiry.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=nx>invoiceExpirySeconds</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-receiptprovided>Property receiptProvided</h4> <p>If true, payees are expected to send receipts.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=nx>receiptProvided</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-remittancemanagerstate>Interface: RemittanceManagerState</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>RemittanceManagerState</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=w>    </span><span class=nx>v</span><span class=o>:</span><span class=w> </span><span class=kt>1</span><span class=p>;</span>
<a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=w>    </span><span class=nx>threads</span><span class=o>:</span><span class=w> </span><span class=kt>Thread</span><span class=p>[];</span>
<a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a><span class=w>    </span><span class=nx>defaultPaymentOptionId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-thread>Thread</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-remittancemodule>Interface: RemittanceModule</h3> <p>A remittance module implements a specific settlement system.</p> <p>The RemittanceManager core uses module ids as the only capability mechanism: if an invoice contains an option with module id X, a payer can only satisfy it if they are configured with module X.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>RemittanceModule</span><span class=o>&lt;</span><span class=nx>TOptionTerms</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>unknown</span><span class=p>,</span><span class=w> </span><span class=nx>TSettlementArtifact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>unknown</span><span class=p>,</span><span class=w> </span><span class=nx>TReceiptData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>unknown</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a><span class=w>    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a><span class=w>    </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a><span class=w>    </span><span class=nx>allowUnsolicitedSettlements</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-79-5 name=__codelineno-79-5 href=#__codelineno-79-5></a><span class=w>    </span><span class=nx>createOption</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-6 name=__codelineno-79-6 href=#__codelineno-79-6></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-79-7 name=__codelineno-79-7 href=#__codelineno-79-7></a><span class=w>        </span><span class=nx>invoice</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-79-8 name=__codelineno-79-8 href=#__codelineno-79-8></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>TOptionTerms</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-79-9 name=__codelineno-79-9 href=#__codelineno-79-9></a><span class=w>    </span><span class=nx>buildSettlement</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-10 name=__codelineno-79-10 href=#__codelineno-79-10></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-79-11 name=__codelineno-79-11 href=#__codelineno-79-11></a><span class=w>        </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-79-12 name=__codelineno-79-12 href=#__codelineno-79-12></a><span class=w>        </span><span class=nx>option</span><span class=o>:</span><span class=w> </span><span class=kt>TOptionTerms</span><span class=p>;</span>
<a id=__codelineno-79-13 name=__codelineno-79-13 href=#__codelineno-79-13></a><span class=w>        </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-79-14 name=__codelineno-79-14 href=#__codelineno-79-14></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-79-15 name=__codelineno-79-15 href=#__codelineno-79-15></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settle&quot;</span><span class=p>;</span>
<a id=__codelineno-79-16 name=__codelineno-79-16 href=#__codelineno-79-16></a><span class=w>        </span><span class=nx>artifact</span><span class=o>:</span><span class=w> </span><span class=kt>TSettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-79-17 name=__codelineno-79-17 href=#__codelineno-79-17></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-18 name=__codelineno-79-18 href=#__codelineno-79-18></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-79-19 name=__codelineno-79-19 href=#__codelineno-79-19></a><span class=w>        </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-79-20 name=__codelineno-79-20 href=#__codelineno-79-20></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-79-21 name=__codelineno-79-21 href=#__codelineno-79-21></a><span class=w>    </span><span class=nx>acceptSettlement</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-22 name=__codelineno-79-22 href=#__codelineno-79-22></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-79-23 name=__codelineno-79-23 href=#__codelineno-79-23></a><span class=w>        </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-79-24 name=__codelineno-79-24 href=#__codelineno-79-24></a><span class=w>        </span><span class=nx>settlement</span><span class=o>:</span><span class=w> </span><span class=kt>TSettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-79-25 name=__codelineno-79-25 href=#__codelineno-79-25></a><span class=w>        </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-79-26 name=__codelineno-79-26 href=#__codelineno-79-26></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-79-27 name=__codelineno-79-27 href=#__codelineno-79-27></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;accept&quot;</span><span class=p>;</span>
<a id=__codelineno-79-28 name=__codelineno-79-28 href=#__codelineno-79-28></a><span class=w>        </span><span class=nx>receiptData?</span><span class=o>:</span><span class=w> </span><span class=kt>TReceiptData</span><span class=p>;</span>
<a id=__codelineno-79-29 name=__codelineno-79-29 href=#__codelineno-79-29></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-30 name=__codelineno-79-30 href=#__codelineno-79-30></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-79-31 name=__codelineno-79-31 href=#__codelineno-79-31></a><span class=w>        </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-79-32 name=__codelineno-79-32 href=#__codelineno-79-32></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-79-33 name=__codelineno-79-33 href=#__codelineno-79-33></a><span class=w>    </span><span class=nx>processReceipt</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-34 name=__codelineno-79-34 href=#__codelineno-79-34></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-79-35 name=__codelineno-79-35 href=#__codelineno-79-35></a><span class=w>        </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-79-36 name=__codelineno-79-36 href=#__codelineno-79-36></a><span class=w>        </span><span class=nx>receiptData</span><span class=o>:</span><span class=w> </span><span class=kt>TReceiptData</span><span class=p>;</span>
<a id=__codelineno-79-37 name=__codelineno-79-37 href=#__codelineno-79-37></a><span class=w>        </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-79-38 name=__codelineno-79-38 href=#__codelineno-79-38></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-79-39 name=__codelineno-79-39 href=#__codelineno-79-39></a><span class=w>    </span><span class=nx>processTermination</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-79-40 name=__codelineno-79-40 href=#__codelineno-79-40></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-79-41 name=__codelineno-79-41 href=#__codelineno-79-41></a><span class=w>        </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-79-42 name=__codelineno-79-42 href=#__codelineno-79-42></a><span class=w>        </span><span class=nx>settlement?</span><span class=o>:</span><span class=w> </span><span class=kt>Settlement</span><span class=p>;</span>
<a id=__codelineno-79-43 name=__codelineno-79-43 href=#__codelineno-79-43></a><span class=w>        </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-79-44 name=__codelineno-79-44 href=#__codelineno-79-44></a><span class=w>        </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-79-45 name=__codelineno-79-45 href=#__codelineno-79-45></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-79-46 name=__codelineno-79-46 href=#__codelineno-79-46></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-acceptsettlement>Property acceptSettlement</h4> <p>Accepts a settlement artifact on the payee side.</p> <p>The module should validate and internalize/store whatever it needs. The manager will wrap the returned value as receipt.receiptData.</p> <p>If the settlement is invalid, the module should return either a termination or receiptData (possibly with a refund or indicating the failure), depending how the module chooses to handle it.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=nx>acceptSettlement</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a><span class=w>    </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a><span class=w>    </span><span class=nx>settlement</span><span class=o>:</span><span class=w> </span><span class=kt>TSettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a><span class=w>    </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-80-6 name=__codelineno-80-6 href=#__codelineno-80-6></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-80-7 name=__codelineno-80-7 href=#__codelineno-80-7></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;accept&quot;</span><span class=p>;</span>
<a id=__codelineno-80-8 name=__codelineno-80-8 href=#__codelineno-80-8></a><span class=w>    </span><span class=nx>receiptData?</span><span class=o>:</span><span class=w> </span><span class=kt>TReceiptData</span><span class=p>;</span>
<a id=__codelineno-80-9 name=__codelineno-80-9 href=#__codelineno-80-9></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-80-10 name=__codelineno-80-10 href=#__codelineno-80-10></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-80-11 name=__codelineno-80-11 href=#__codelineno-80-11></a><span class=w>    </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-80-12 name=__codelineno-80-12 href=#__codelineno-80-12></a><span class=p>}</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-allowunsolicitedsettlements>Property allowUnsolicitedSettlements</h4> <p>Whether this module allows unsolicited settlements (i.e. settlement without an invoice).</p> <p>If true, the payer can build a settlement without an invoice being provided by the payee. In this case, the option terms provided to <code>buildSettlement</code> may be used in lieu of an invoice.</p> <p>If false, an invoice must always be provided to <code>buildSettlement</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a><span class=nx>allowUnsolicitedSettlements</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span>
</code></pre></div> <h4 id=property-buildsettlement>Property buildSettlement</h4> <p>Builds the settlement artifact for a chosen option.</p> <p>For UTXO settlement systems, this is usually a transaction (or partially-signed tx) to be broadcast.</p> <p>For unsolicited settlements, an invoice may not always be provided and the option terms may be used in lieu of an invoice to settle against.</p> <p>For example, the option terms may include a tx template with outputs to fulfill the settlement.</p> <p>When <code>allowUnsolicitedSettlements</code> is false, an invoice will always be provided.</p> <p>Termination can be returned to abort the protocol with a reason.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=nx>buildSettlement</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-82-3 name=__codelineno-82-3 href=#__codelineno-82-3></a><span class=w>    </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-82-4 name=__codelineno-82-4 href=#__codelineno-82-4></a><span class=w>    </span><span class=nx>option</span><span class=o>:</span><span class=w> </span><span class=kt>TOptionTerms</span><span class=p>;</span>
<a id=__codelineno-82-5 name=__codelineno-82-5 href=#__codelineno-82-5></a><span class=w>    </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-82-6 name=__codelineno-82-6 href=#__codelineno-82-6></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-82-7 name=__codelineno-82-7 href=#__codelineno-82-7></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settle&quot;</span><span class=p>;</span>
<a id=__codelineno-82-8 name=__codelineno-82-8 href=#__codelineno-82-8></a><span class=w>    </span><span class=nx>artifact</span><span class=o>:</span><span class=w> </span><span class=kt>TSettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-82-9 name=__codelineno-82-9 href=#__codelineno-82-9></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-82-10 name=__codelineno-82-10 href=#__codelineno-82-10></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-82-11 name=__codelineno-82-11 href=#__codelineno-82-11></a><span class=w>    </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-82-12 name=__codelineno-82-12 href=#__codelineno-82-12></a><span class=p>}</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-createoption>Property createOption</h4> <p>Creates module-defined option terms that will be embedded into the invoice.</p> <p>In UTXO-ish offers, these option terms may include a partially-signed transaction template.</p> <p>Optional because some modules may not require any option data, or may only support unsolicited settlements.</p> <p>However, a module MAY still create option terms/invoices even if it can sometimes support unsolicited settlements.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=nx>createOption</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-83-2 name=__codelineno-83-2 href=#__codelineno-83-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-83-3 name=__codelineno-83-3 href=#__codelineno-83-3></a><span class=w>    </span><span class=nx>invoice</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-83-4 name=__codelineno-83-4 href=#__codelineno-83-4></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>TOptionTerms</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-id_1>Property id</h4> <p>Unique id used as the invoice.options key and as settlement.moduleId.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span>
</code></pre></div> See also: <a href=./#type-remittanceoptionid>RemittanceOptionId</a></p> <h4 id=property-name>Property name</h4> <p>Human-readable name for UIs.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-processreceipt>Property processReceipt</h4> <p>Processes a receipt on the payer side.</p> <p>This is where a module can automatically internalize a refund, mark a local order fulfilled, receive goods and services, etc.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=nx>processReceipt</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-86-3 name=__codelineno-86-3 href=#__codelineno-86-3></a><span class=w>    </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-86-4 name=__codelineno-86-4 href=#__codelineno-86-4></a><span class=w>    </span><span class=nx>receiptData</span><span class=o>:</span><span class=w> </span><span class=kt>TReceiptData</span><span class=p>;</span>
<a id=__codelineno-86-5 name=__codelineno-86-5 href=#__codelineno-86-5></a><span class=w>    </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-86-6 name=__codelineno-86-6 href=#__codelineno-86-6></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=property-processtermination>Property processTermination</h4> <p>Processes a termination on either side.</p> <p>This is where a module can clean up any internal state, reverse provisional actions, take refunds, etc.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=nx>processTermination</span><span class=o>?:</span><span class=w> </span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=w>    </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a><span class=w>    </span><span class=nx>settlement?</span><span class=o>:</span><span class=w> </span><span class=kt>Settlement</span><span class=p>;</span>
<a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a><span class=w>    </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a><span class=w>    </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-87-7 name=__codelineno-87-7 href=#__codelineno-87-7></a><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-settlement>Interface: Settlement</h3> <p>A settlement attempt.</p> <p>This is module-agnostic: "artifact" can be a transaction, a partial transaction, a stablecoin transfer result, even a fiat card-payment approval code, etc.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Settlement</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a><span class=w>    </span><span class=nx>kind</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settlement&quot;</span><span class=p>;</span>
<a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a><span class=w>    </span><span class=kr>module</span><span class=nx>Id</span><span class=o>:</span><span class=w> </span><span class=nx>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a><span class=w>    </span><span class=nx>optionId</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a><span class=w>    </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a><span class=w>    </span><span class=nx>artifact</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-88-9 name=__codelineno-88-9 href=#__codelineno-88-9></a><span class=w>    </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-88-10 name=__codelineno-88-10 href=#__codelineno-88-10></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#type-threadid>ThreadId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-termination>Interface: Termination</h3> <p>Termination details for failed operations.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Termination</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-89-2 name=__codelineno-89-2 href=#__codelineno-89-2></a><span class=w>    </span><span class=nx>code</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-89-3 name=__codelineno-89-3 href=#__codelineno-89-3></a><span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-89-4 name=__codelineno-89-4 href=#__codelineno-89-4></a><span class=w>    </span><span class=nx>details?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-89-5 name=__codelineno-89-5 href=#__codelineno-89-5></a><span class=p>}</span>
</code></pre></div> <h4 id=property-code>Property code</h4> <p>Reason code (module-specific).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=nx>code</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-details>Property details</h4> <p>Optional module-specific details or refund information.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=nx>details?</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span>
</code></pre></div> <h4 id=property-message>Property message</h4> <p>Human-readable message.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-thread>Interface: Thread</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Thread</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a><span class=w>    </span><span class=nx>counterparty</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a><span class=w>    </span><span class=nx>myRole</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;maker&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;taker&quot;</span><span class=p>;</span>
<a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a><span class=w>    </span><span class=nx>theirRole</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;maker&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;taker&quot;</span><span class=p>;</span>
<a id=__codelineno-93-6 name=__codelineno-93-6 href=#__codelineno-93-6></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-93-7 name=__codelineno-93-7 href=#__codelineno-93-7></a><span class=w>    </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-93-8 name=__codelineno-93-8 href=#__codelineno-93-8></a><span class=w>    </span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-93-9 name=__codelineno-93-9 href=#__codelineno-93-9></a><span class=w>    </span><span class=nx>stateLog</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-93-10 name=__codelineno-93-10 href=#__codelineno-93-10></a><span class=w>        </span><span class=nx>at</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-93-11 name=__codelineno-93-11 href=#__codelineno-93-11></a><span class=w>        </span><span class=nx>from</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-93-12 name=__codelineno-93-12 href=#__codelineno-93-12></a><span class=w>        </span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-93-13 name=__codelineno-93-13 href=#__codelineno-93-13></a><span class=w>        </span><span class=nx>reason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-93-14 name=__codelineno-93-14 href=#__codelineno-93-14></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-93-15 name=__codelineno-93-15 href=#__codelineno-93-15></a><span class=w>    </span><span class=nx>processedMessageIds</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
<a id=__codelineno-93-16 name=__codelineno-93-16 href=#__codelineno-93-16></a><span class=w>    </span><span class=nx>protocolLog</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-93-17 name=__codelineno-93-17 href=#__codelineno-93-17></a><span class=w>        </span><span class=nx>direction</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;in&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;out&quot;</span><span class=p>;</span>
<a id=__codelineno-93-18 name=__codelineno-93-18 href=#__codelineno-93-18></a><span class=w>        </span><span class=nx>envelope</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEnvelope</span><span class=p>;</span>
<a id=__codelineno-93-19 name=__codelineno-93-19 href=#__codelineno-93-19></a><span class=w>        </span><span class=nx>transportMessageId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-93-20 name=__codelineno-93-20 href=#__codelineno-93-20></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=p>;</span>
<a id=__codelineno-93-21 name=__codelineno-93-21 href=#__codelineno-93-21></a><span class=w>    </span><span class=nx>identity</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-93-22 name=__codelineno-93-22 href=#__codelineno-93-22></a><span class=w>        </span><span class=nx>certsSent</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>[</span><span class=s2>&quot;certificates&quot;</span><span class=p>];</span>
<a id=__codelineno-93-23 name=__codelineno-93-23 href=#__codelineno-93-23></a><span class=w>        </span><span class=nx>certsReceived</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>[</span><span class=s2>&quot;certificates&quot;</span><span class=p>];</span>
<a id=__codelineno-93-24 name=__codelineno-93-24 href=#__codelineno-93-24></a><span class=w>        </span><span class=nx>requestSent</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-25 name=__codelineno-93-25 href=#__codelineno-93-25></a><span class=w>        </span><span class=nx>responseSent</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-26 name=__codelineno-93-26 href=#__codelineno-93-26></a><span class=w>        </span><span class=nx>acknowledgmentSent</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-27 name=__codelineno-93-27 href=#__codelineno-93-27></a><span class=w>        </span><span class=nx>acknowledgmentReceived</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-28 name=__codelineno-93-28 href=#__codelineno-93-28></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-93-29 name=__codelineno-93-29 href=#__codelineno-93-29></a><span class=w>    </span><span class=nx>invoice?</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-93-30 name=__codelineno-93-30 href=#__codelineno-93-30></a><span class=w>    </span><span class=nx>settlement?</span><span class=o>:</span><span class=w> </span><span class=kt>Settlement</span><span class=p>;</span>
<a id=__codelineno-93-31 name=__codelineno-93-31 href=#__codelineno-93-31></a><span class=w>    </span><span class=nx>receipt?</span><span class=o>:</span><span class=w> </span><span class=kt>Receipt</span><span class=p>;</span>
<a id=__codelineno-93-32 name=__codelineno-93-32 href=#__codelineno-93-32></a><span class=w>    </span><span class=nx>termination?</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-93-33 name=__codelineno-93-33 href=#__codelineno-93-33></a><span class=w>    </span><span class=nx>flags</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-93-34 name=__codelineno-93-34 href=#__codelineno-93-34></a><span class=w>        </span><span class=nx>hasIdentified</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-35 name=__codelineno-93-35 href=#__codelineno-93-35></a><span class=w>        </span><span class=nx>hasInvoiced</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-36 name=__codelineno-93-36 href=#__codelineno-93-36></a><span class=w>        </span><span class=nx>hasPaid</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-37 name=__codelineno-93-37 href=#__codelineno-93-37></a><span class=w>        </span><span class=nx>hasReceipted</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-38 name=__codelineno-93-38 href=#__codelineno-93-38></a><span class=w>        </span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
<a id=__codelineno-93-39 name=__codelineno-93-39 href=#__codelineno-93-39></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-93-40 name=__codelineno-93-40 href=#__codelineno-93-40></a><span class=w>    </span><span class=nx>lastError</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-93-41 name=__codelineno-93-41 href=#__codelineno-93-41></a><span class=w>        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-93-42 name=__codelineno-93-42 href=#__codelineno-93-42></a><span class=w>        </span><span class=nx>at</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-93-43 name=__codelineno-93-43 href=#__codelineno-93-43></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-93-44 name=__codelineno-93-44 href=#__codelineno-93-44></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-identityverificationresponse>IdentityVerificationResponse</a>, <a href=./#interface-invoice>Invoice</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-receipt>Receipt</a>, <a href=./#interface-remittanceenvelope>RemittanceEnvelope</a>, <a href=./#type-remittancethreadstate>RemittanceThreadState</a>, <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <h4 id=property-processedmessageids>Property processedMessageIds</h4> <p>Transport messageIds processed for this thread (dedupe across retries).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=nx>processedMessageIds</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[]</span>
</code></pre></div> <h4 id=property-protocollog>Property protocolLog</h4> <p>Protocol envelopes received/sent (for debugging/audit).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=nx>protocolLog</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-95-2 name=__codelineno-95-2 href=#__codelineno-95-2></a><span class=w>    </span><span class=nx>direction</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;in&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;out&quot;</span><span class=p>;</span>
<a id=__codelineno-95-3 name=__codelineno-95-3 href=#__codelineno-95-3></a><span class=w>    </span><span class=nx>envelope</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEnvelope</span><span class=p>;</span>
<a id=__codelineno-95-4 name=__codelineno-95-4 href=#__codelineno-95-4></a><span class=w>    </span><span class=nx>transportMessageId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-95-5 name=__codelineno-95-5 href=#__codelineno-95-5></a><span class=p>}</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#interface-remittanceenvelope>RemittanceEnvelope</a></p> <h4 id=property-statelog>Property stateLog</h4> <p>State transition log for audit purposes.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a><span class=nx>stateLog</span><span class=o>:</span><span class=w> </span><span class=kt>Array</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-96-2 name=__codelineno-96-2 href=#__codelineno-96-2></a><span class=w>    </span><span class=nx>at</span><span class=o>:</span><span class=w> </span><span class=kt>UnixMillis</span><span class=p>;</span>
<a id=__codelineno-96-3 name=__codelineno-96-3 href=#__codelineno-96-3></a><span class=w>    </span><span class=nx>from</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-96-4 name=__codelineno-96-4 href=#__codelineno-96-4></a><span class=w>    </span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-96-5 name=__codelineno-96-5 href=#__codelineno-96-5></a><span class=w>    </span><span class=nx>reason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-96-6 name=__codelineno-96-6 href=#__codelineno-96-6></a><span class=p>}</span><span class=o>&gt;</span>
</code></pre></div> See also: <a href=./#type-remittancethreadstate>RemittanceThreadState</a>, <a href=./#type-unixmillis>UnixMillis</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=interface-unit>Interface: Unit</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>Unit</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-97-2 name=__codelineno-97-2 href=#__codelineno-97-2></a><span class=w>    </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-97-3 name=__codelineno-97-3 href=#__codelineno-97-3></a><span class=w>    </span><span class=nx>code</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-97-4 name=__codelineno-97-4 href=#__codelineno-97-4></a><span class=w>    </span><span class=nx>decimals?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-97-5 name=__codelineno-97-5 href=#__codelineno-97-5></a><span class=p>}</span>
</code></pre></div> <h4 id=property-code_1>Property code</h4> <p>Unit code within the namespace, e.g. 'sat', 'USD', 'mnee'.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=nx>code</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <h4 id=property-decimals>Property decimals</h4> <p>Optional decimal places for display/normalization.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a><span class=nx>decimals?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <h4 id=property-namespace>Property namespace</h4> <p>Namespace for disambiguation, e.g. 'bsv', 'iso4217', 'token'.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h2 id=classes>Classes</h2> <table> <thead> <tr> <th></th> </tr> </thead> <tbody> <tr> <td><a href=#class-brc29remittancemodule>Brc29RemittanceModule</a></td> </tr> <tr> <td><a href=#class-invoicehandle>InvoiceHandle</a></td> </tr> <tr> <td><a href=#class-remittancemanager>RemittanceManager</a></td> </tr> <tr> <td><a href=#class-threadhandle>ThreadHandle</a></td> </tr> </tbody> </table> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=class-brc29remittancemodule>Class: Brc29RemittanceModule</h3> <p>BRC-29-based remittance module. - payer creates a payment action to a derived P2PKH output - payer sends { tx, derivationPrefix, derivationSuffix } as settlement artifact - payee internalizes the tx output using wallet.internalizeAction - optional rejection can include a refund token embedded in the termination details</p> <div class=highlight><pre><span></span><code><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a><span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>Brc29RemittanceModule</span><span class=w> </span><span class=k>implements</span><span class=w> </span><span class=nx>RemittanceModule</span><span class=o>&lt;</span><span class=nx>Brc29OptionTerms</span><span class=p>,</span><span class=w> </span><span class=nx>Brc29SettlementArtifact</span><span class=p>,</span><span class=w> </span><span class=nx>Brc29ReceiptData</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-101-2 name=__codelineno-101-2 href=#__codelineno-101-2></a><span class=w>    </span><span class=k>readonly</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;brc29.p2pkh&quot;</span><span class=p>;</span>
<a id=__codelineno-101-3 name=__codelineno-101-3 href=#__codelineno-101-3></a><span class=w>    </span><span class=k>readonly</span><span class=w> </span><span class=nx>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;BSV (BRC-29 derived P2PKH)&quot;</span><span class=p>;</span>
<a id=__codelineno-101-4 name=__codelineno-101-4 href=#__codelineno-101-4></a><span class=w>    </span><span class=k>readonly</span><span class=w> </span><span class=nx>allowUnsolicitedSettlements</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span>
<a id=__codelineno-101-5 name=__codelineno-101-5 href=#__codelineno-101-5></a><span class=w>    </span><span class=kr>constructor</span><span class=p>(</span><span class=nx>cfg</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29RemittanceModuleConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=w> </span>
<a id=__codelineno-101-6 name=__codelineno-101-6 href=#__codelineno-101-6></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>buildSettlement</span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-101-7 name=__codelineno-101-7 href=#__codelineno-101-7></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-101-8 name=__codelineno-101-8 href=#__codelineno-101-8></a><span class=w>        </span><span class=nx>option</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29OptionTerms</span><span class=p>;</span>
<a id=__codelineno-101-9 name=__codelineno-101-9 href=#__codelineno-101-9></a><span class=w>        </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-101-10 name=__codelineno-101-10 href=#__codelineno-101-10></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-101-11 name=__codelineno-101-11 href=#__codelineno-101-11></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settle&quot;</span><span class=p>;</span>
<a id=__codelineno-101-12 name=__codelineno-101-12 href=#__codelineno-101-12></a><span class=w>        </span><span class=nx>artifact</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29SettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-101-13 name=__codelineno-101-13 href=#__codelineno-101-13></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-101-14 name=__codelineno-101-14 href=#__codelineno-101-14></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-101-15 name=__codelineno-101-15 href=#__codelineno-101-15></a><span class=w>        </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-101-16 name=__codelineno-101-16 href=#__codelineno-101-16></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-101-17 name=__codelineno-101-17 href=#__codelineno-101-17></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>acceptSettlement</span><span class=p>(</span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-101-18 name=__codelineno-101-18 href=#__codelineno-101-18></a><span class=w>        </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-101-19 name=__codelineno-101-19 href=#__codelineno-101-19></a><span class=w>        </span><span class=nx>settlement</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29SettlementArtifact</span><span class=p>;</span>
<a id=__codelineno-101-20 name=__codelineno-101-20 href=#__codelineno-101-20></a><span class=w>        </span><span class=nx>sender</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>;</span>
<a id=__codelineno-101-21 name=__codelineno-101-21 href=#__codelineno-101-21></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>ctx</span><span class=o>:</span><span class=w> </span><span class=kt>ModuleContext</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
<a id=__codelineno-101-22 name=__codelineno-101-22 href=#__codelineno-101-22></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;accept&quot;</span><span class=p>;</span>
<a id=__codelineno-101-23 name=__codelineno-101-23 href=#__codelineno-101-23></a><span class=w>        </span><span class=nx>receiptData?</span><span class=o>:</span><span class=w> </span><span class=kt>Brc29ReceiptData</span><span class=p>;</span>
<a id=__codelineno-101-24 name=__codelineno-101-24 href=#__codelineno-101-24></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-101-25 name=__codelineno-101-25 href=#__codelineno-101-25></a><span class=w>        </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminate&quot;</span><span class=p>;</span>
<a id=__codelineno-101-26 name=__codelineno-101-26 href=#__codelineno-101-26></a><span class=w>        </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-101-27 name=__codelineno-101-27 href=#__codelineno-101-27></a><span class=w>    </span><span class=p>}</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-101-28 name=__codelineno-101-28 href=#__codelineno-101-28></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-brc29optionterms>Brc29OptionTerms</a>, <a href=./#interface-brc29receiptdata>Brc29ReceiptData</a>, <a href=./#interface-brc29remittancemoduleconfig>Brc29RemittanceModuleConfig</a>, <a href=./#interface-brc29settlementartifact>Brc29SettlementArtifact</a>, <a href=./#interface-modulecontext>ModuleContext</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-remittancemodule>RemittanceModule</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#interface-termination>Termination</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=class-invoicehandle>Class: InvoiceHandle</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a><span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>InvoiceHandle</span><span class=w> </span><span class=k>extends</span><span class=w> </span><span class=nx>ThreadHandle</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-102-2 name=__codelineno-102-2 href=#__codelineno-102-2></a><span class=w>    </span><span class=nx>get</span><span class=w> </span><span class=nx>invoice</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nx>Invoice</span><span class=w> </span>
<a id=__codelineno-102-3 name=__codelineno-102-3 href=#__codelineno-102-3></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>pay</span><span class=p>(</span><span class=nx>optionId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-102-4 name=__codelineno-102-4 href=#__codelineno-102-4></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-receipt>Receipt</a>, <a href=./#interface-termination>Termination</a>, <a href=./#class-threadhandle>ThreadHandle</a></p> <h4 id=method-pay>Method pay</h4> <p>Pays the invoice using the selected remittance option.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=k>async</span><span class=w> </span><span class=nx>pay</span><span class=p>(</span><span class=nx>optionId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-receipt>Receipt</a>, <a href=./#interface-termination>Termination</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=class-remittancemanager>Class: RemittanceManager</h3> <p>RemittanceManager.</p> <p>Responsibilities: - message transport via CommsLayer - thread lifecycle and persistence (via stateSaver/stateLoader) - invoice creation and transmission (when invoices are used) - settlement and settlement routing to the appropriate module - receipt issuance and receipt routing to the appropriate module - identity and identity certificate exchange (when identity layer is used)</p> <p>Non-responsibilities (left to modules): - transaction structure (whether UTXO offer formats, token logic, BRC-98/99 specifics, etc.) - validation rules for settlement (e.g. partial tx templates, UTXO validity, etc.) - on-chain broadcasting strategy or non-chain settlement specifics (like legacy payment protocols) - Providing option terms for invoices - Building settlement artifacts - Accepting/rejecting settlements - Deciding which identity certificates to request - Deciding about sufficiency of identity certificates - Preparing/processing specific receipt formats - Internal business logic like order fulfillment, refunds, etc.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>RemittanceManager</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-104-2 name=__codelineno-104-2 href=#__codelineno-104-2></a><span class=w>    </span><span class=k>readonly</span><span class=w> </span><span class=nx>wallet</span><span class=o>:</span><span class=w> </span><span class=kt>WalletInterface</span><span class=p>;</span>
<a id=__codelineno-104-3 name=__codelineno-104-3 href=#__codelineno-104-3></a><span class=w>    </span><span class=k>readonly</span><span class=w> </span><span class=nx>comms</span><span class=o>:</span><span class=w> </span><span class=kt>CommsLayer</span><span class=p>;</span>
<a id=__codelineno-104-4 name=__codelineno-104-4 href=#__codelineno-104-4></a><span class=w>    </span><span class=k>readonly</span><span class=w> </span><span class=nx>cfg</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManagerConfig</span><span class=p>;</span>
<a id=__codelineno-104-5 name=__codelineno-104-5 href=#__codelineno-104-5></a><span class=w>    </span><span class=nx>threads</span><span class=o>:</span><span class=w> </span><span class=kt>Thread</span><span class=p>[];</span>
<a id=__codelineno-104-6 name=__codelineno-104-6 href=#__codelineno-104-6></a><span class=w>    </span><span class=kr>constructor</span><span class=p>(</span><span class=nx>cfg</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManagerConfig</span><span class=p>,</span><span class=w> </span><span class=nx>wallet</span><span class=o>:</span><span class=w> </span><span class=kt>WalletInterface</span><span class=p>,</span><span class=w> </span><span class=nx>commsLayer</span><span class=o>:</span><span class=w> </span><span class=kt>CommsLayer</span><span class=p>,</span><span class=w> </span><span class=nx>threads</span><span class=o>:</span><span class=w> </span><span class=kt>Thread</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[])</span><span class=w> </span>
<a id=__codelineno-104-7 name=__codelineno-104-7 href=#__codelineno-104-7></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>init</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-8 name=__codelineno-104-8 href=#__codelineno-104-8></a><span class=w>    </span><span class=nx>onEvent</span><span class=p>(</span><span class=nx>listener</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=w> </span>
<a id=__codelineno-104-9 name=__codelineno-104-9 href=#__codelineno-104-9></a><span class=w>    </span><span class=nx>preselectPaymentOption</span><span class=p>(</span><span class=nx>optionId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=ow>void</span><span class=w> </span>
<a id=__codelineno-104-10 name=__codelineno-104-10 href=#__codelineno-104-10></a><span class=w>    </span><span class=nx>saveState</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nx>RemittanceManagerState</span><span class=w> </span>
<a id=__codelineno-104-11 name=__codelineno-104-11 href=#__codelineno-104-11></a><span class=w>    </span><span class=nx>loadState</span><span class=p>(</span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManagerState</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=ow>void</span><span class=w> </span>
<a id=__codelineno-104-12 name=__codelineno-104-12 href=#__codelineno-104-12></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>persistState</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-13 name=__codelineno-104-13 href=#__codelineno-104-13></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>syncThreads</span><span class=p>(</span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-14 name=__codelineno-104-14 href=#__codelineno-104-14></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>startListening</span><span class=p>(</span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-15 name=__codelineno-104-15 href=#__codelineno-104-15></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>sendInvoice</span><span class=p>(</span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>,</span><span class=w> </span><span class=nx>input</span><span class=o>:</span><span class=w> </span><span class=kt>ComposeInvoiceInput</span><span class=p>,</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>InvoiceHandle</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-16 name=__codelineno-104-16 href=#__codelineno-104-16></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>sendInvoiceForThread</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>input</span><span class=o>:</span><span class=w> </span><span class=kt>ComposeInvoiceInput</span><span class=p>,</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>InvoiceHandle</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-17 name=__codelineno-104-17 href=#__codelineno-104-17></a><span class=w>    </span><span class=nx>findInvoicesPayable</span><span class=p>(</span><span class=nx>counterparty?</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>InvoiceHandle</span><span class=p>[]</span><span class=w> </span>
<a id=__codelineno-104-18 name=__codelineno-104-18 href=#__codelineno-104-18></a><span class=w>    </span><span class=nx>findReceivableInvoices</span><span class=p>(</span><span class=nx>counterparty?</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>InvoiceHandle</span><span class=p>[]</span><span class=w> </span>
<a id=__codelineno-104-19 name=__codelineno-104-19 href=#__codelineno-104-19></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>pay</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>optionId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-20 name=__codelineno-104-20 href=#__codelineno-104-20></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForReceipt</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-104-21 name=__codelineno-104-21 href=#__codelineno-104-21></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-22 name=__codelineno-104-22 href=#__codelineno-104-22></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-23 name=__codelineno-104-23 href=#__codelineno-104-23></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-24 name=__codelineno-104-24 href=#__codelineno-104-24></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForState</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-104-25 name=__codelineno-104-25 href=#__codelineno-104-25></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-26 name=__codelineno-104-26 href=#__codelineno-104-26></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-27 name=__codelineno-104-27 href=#__codelineno-104-27></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Thread</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-28 name=__codelineno-104-28 href=#__codelineno-104-28></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForIdentity</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-104-29 name=__codelineno-104-29 href=#__codelineno-104-29></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-30 name=__codelineno-104-30 href=#__codelineno-104-30></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-31 name=__codelineno-104-31 href=#__codelineno-104-31></a><span class=w>    </span><span class=p>})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Thread</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-32 name=__codelineno-104-32 href=#__codelineno-104-32></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForSettlement</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-104-33 name=__codelineno-104-33 href=#__codelineno-104-33></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-34 name=__codelineno-104-34 href=#__codelineno-104-34></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-104-35 name=__codelineno-104-35 href=#__codelineno-104-35></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Settlement</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-36 name=__codelineno-104-36 href=#__codelineno-104-36></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>sendUnsolicitedSettlement</span><span class=p>(</span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>,</span><span class=w> </span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-104-37 name=__codelineno-104-37 href=#__codelineno-104-37></a><span class=w>        </span><span class=kr>module</span><span class=nx>Id</span><span class=o>:</span><span class=w> </span><span class=nx>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-104-38 name=__codelineno-104-38 href=#__codelineno-104-38></a><span class=w>        </span><span class=nx>option</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-104-39 name=__codelineno-104-39 href=#__codelineno-104-39></a><span class=w>        </span><span class=nx>optionId?</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-104-40 name=__codelineno-104-40 href=#__codelineno-104-40></a><span class=w>        </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-104-41 name=__codelineno-104-41 href=#__codelineno-104-41></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>ThreadHandle</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-104-42 name=__codelineno-104-42 href=#__codelineno-104-42></a><span class=w>    </span><span class=nx>getThread</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Thread</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=w> </span>
<a id=__codelineno-104-43 name=__codelineno-104-43 href=#__codelineno-104-43></a><span class=w>    </span><span class=nx>getThreadHandle</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>ThreadHandle</span><span class=w> </span>
<a id=__codelineno-104-44 name=__codelineno-104-44 href=#__codelineno-104-44></a><span class=w>    </span><span class=nx>getThreadOrThrow</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Thread</span><span class=w> </span>
<a id=__codelineno-104-45 name=__codelineno-104-45 href=#__codelineno-104-45></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-commslayer>CommsLayer</a>, <a href=./#interface-composeinvoiceinput>ComposeInvoiceInput</a>, <a href=./#class-invoicehandle>InvoiceHandle</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#interface-receipt>Receipt</a>, <a href=./#type-remittanceevent>RemittanceEvent</a>, <a href=./#interface-remittancemanagerconfig>RemittanceManagerConfig</a>, <a href=./#interface-remittancemanagerstate>RemittanceManagerState</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#type-remittancethreadstate>RemittanceThreadState</a>, <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#interface-thread>Thread</a>, <a href=./#class-threadhandle>ThreadHandle</a>, <a href=./#type-threadid>ThreadId</a>, <a href=../wallet/#interface-walletinterface>WalletInterface</a></p> <h4 id=property-threads>Property threads</h4> <p>Mutable threads list (persisted via stateSaver).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=nx>threads</span><span class=o>:</span><span class=w> </span><span class=kt>Thread</span><span class=p>[]</span>
</code></pre></div> See also: <a href=./#interface-thread>Thread</a></p> <h4 id=method-findinvoicespayable>Method findInvoicesPayable</h4> <p>Returns invoice handles that this manager can pay (we are the taker/payer).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=nx>findInvoicesPayable</span><span class=p>(</span><span class=nx>counterparty?</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>InvoiceHandle</span><span class=p>[]</span><span class=w> </span>
</code></pre></div> See also: <a href=./#class-invoicehandle>InvoiceHandle</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <h4 id=method-findreceivableinvoices>Method findReceivableInvoices</h4> <p>Returns invoice handles that we issued and are waiting to receive settlement for.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-107-1 name=__codelineno-107-1 href=#__codelineno-107-1></a><span class=nx>findReceivableInvoices</span><span class=p>(</span><span class=nx>counterparty?</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>InvoiceHandle</span><span class=p>[]</span><span class=w> </span>
</code></pre></div> See also: <a href=./#class-invoicehandle>InvoiceHandle</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <h4 id=method-getthread>Method getThread</h4> <p>Returns a thread by id (if present).</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-108-1 name=__codelineno-108-1 href=#__codelineno-108-1></a><span class=nx>getThread</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Thread</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-thread>Thread</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-getthreadhandle>Method getThreadHandle</h4> <p>Returns a thread handle by id, or throws if the thread does not exist.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-109-1 name=__codelineno-109-1 href=#__codelineno-109-1></a><span class=nx>getThreadHandle</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>ThreadHandle</span><span class=w> </span>
</code></pre></div> See also: <a href=./#class-threadhandle>ThreadHandle</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-getthreadorthrow>Method getThreadOrThrow</h4> <p>Returns a thread by id or throws.</p> <p>Public so helper handles (e.g. InvoiceHandle) can call it.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-110-1 name=__codelineno-110-1 href=#__codelineno-110-1></a><span class=nx>getThreadOrThrow</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Thread</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-thread>Thread</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-init>Method init</h4> <p>Loads persisted state from cfg.stateLoader (if provided).</p> <p>Safe to call multiple times.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-111-1 name=__codelineno-111-1 href=#__codelineno-111-1></a><span class=k>async</span><span class=w> </span><span class=nx>init</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> <h4 id=method-loadstate>Method loadState</h4> <p>Loads state from an object previously produced by saveState().</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-112-1 name=__codelineno-112-1 href=#__codelineno-112-1></a><span class=nx>loadState</span><span class=p>(</span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManagerState</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=ow>void</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-remittancemanagerstate>RemittanceManagerState</a></p> <h4 id=method-onevent>Method onEvent</h4> <p>Registers a remittance event listener.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-113-1 name=__codelineno-113-1 href=#__codelineno-113-1></a><span class=nx>onEvent</span><span class=p>(</span><span class=nx>listener</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=w> </span>
</code></pre></div> See also: <a href=./#type-remittanceevent>RemittanceEvent</a></p> <h4 id=method-pay_1>Method pay</h4> <p>Pays an invoice by selecting a remittance option and sending a settlement message.</p> <p>If receipts are enabled (receiptProvided), this method will optionally wait for a receipt.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-114-1 name=__codelineno-114-1 href=#__codelineno-114-1></a><span class=k>async</span><span class=w> </span><span class=nx>pay</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>optionId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-receipt>Receipt</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-persiststate>Method persistState</h4> <p>Persists current state via cfg.stateSaver (if provided).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-115-1 name=__codelineno-115-1 href=#__codelineno-115-1></a><span class=k>async</span><span class=w> </span><span class=nx>persistState</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> <h4 id=method-preselectpaymentoption>Method preselectPaymentOption</h4> <p>Sets a default payment option (module id) to use when paying invoices.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-116-1 name=__codelineno-116-1 href=#__codelineno-116-1></a><span class=nx>preselectPaymentOption</span><span class=p>(</span><span class=nx>optionId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=ow>void</span><span class=w> </span>
</code></pre></div> <h4 id=method-savestate>Method saveState</h4> <p>Returns an immutable snapshot of current manager state suitable for persistence.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-117-1 name=__codelineno-117-1 href=#__codelineno-117-1></a><span class=nx>saveState</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nx>RemittanceManagerState</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-remittancemanagerstate>RemittanceManagerState</a></p> <h4 id=method-sendinvoice>Method sendInvoice</h4> <p>Creates, records, and sends an invoice to a counterparty.</p> <p>Returns a handle you can use to wait for payment/receipt.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-118-1 name=__codelineno-118-1 href=#__codelineno-118-1></a><span class=k>async</span><span class=w> </span><span class=nx>sendInvoice</span><span class=p>(</span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>,</span><span class=w> </span><span class=nx>input</span><span class=o>:</span><span class=w> </span><span class=kt>ComposeInvoiceInput</span><span class=p>,</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>InvoiceHandle</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-composeinvoiceinput>ComposeInvoiceInput</a>, <a href=./#class-invoicehandle>InvoiceHandle</a>, <a href=../wallet/#type-pubkeyhex>PubKeyHex</a></p> <h4 id=method-sendinvoiceforthread>Method sendInvoiceForThread</h4> <p>Sends an invoice for an existing thread, e.g. after an identity request was received.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-119-1 name=__codelineno-119-1 href=#__codelineno-119-1></a><span class=k>async</span><span class=w> </span><span class=nx>sendInvoiceForThread</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>input</span><span class=o>:</span><span class=w> </span><span class=kt>ComposeInvoiceInput</span><span class=p>,</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>InvoiceHandle</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-composeinvoiceinput>ComposeInvoiceInput</a>, <a href=./#class-invoicehandle>InvoiceHandle</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-sendunsolicitedsettlement>Method sendUnsolicitedSettlement</h4> <p>Sends an unsolicited settlement to a counterparty.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-120-1 name=__codelineno-120-1 href=#__codelineno-120-1></a><span class=k>async</span><span class=w> </span><span class=nx>sendUnsolicitedSettlement</span><span class=p>(</span><span class=nx>to</span><span class=o>:</span><span class=w> </span><span class=kt>PubKeyHex</span><span class=p>,</span><span class=w> </span><span class=nx>args</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-120-2 name=__codelineno-120-2 href=#__codelineno-120-2></a><span class=w>    </span><span class=kr>module</span><span class=nx>Id</span><span class=o>:</span><span class=w> </span><span class=nx>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-120-3 name=__codelineno-120-3 href=#__codelineno-120-3></a><span class=w>    </span><span class=nx>option</span><span class=o>:</span><span class=w> </span><span class=kt>unknown</span><span class=p>;</span>
<a id=__codelineno-120-4 name=__codelineno-120-4 href=#__codelineno-120-4></a><span class=w>    </span><span class=nx>optionId?</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceOptionId</span><span class=p>;</span>
<a id=__codelineno-120-5 name=__codelineno-120-5 href=#__codelineno-120-5></a><span class=w>    </span><span class=nx>note?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-120-6 name=__codelineno-120-6 href=#__codelineno-120-6></a><span class=p>},</span><span class=w> </span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>ThreadHandle</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=../wallet/#type-pubkeyhex>PubKeyHex</a>, <a href=./#type-remittanceoptionid>RemittanceOptionId</a>, <a href=./#class-threadhandle>ThreadHandle</a></p> <h4 id=method-startlistening>Method startListening</h4> <p>Starts listening for live messages (if the CommsLayer supports it).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-121-1 name=__codelineno-121-1 href=#__codelineno-121-1></a><span class=k>async</span><span class=w> </span><span class=nx>startListening</span><span class=p>(</span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> <h4 id=method-syncthreads>Method syncThreads</h4> <p>Syncs threads by fetching pending messages from the comms layer and processing them.</p> <p>Processing is idempotent using transport messageIds tracked per thread. Messages are acknowledged after they are successfully applied to local state.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-122-1 name=__codelineno-122-1 href=#__codelineno-122-1></a><span class=k>async</span><span class=w> </span><span class=nx>syncThreads</span><span class=p>(</span><span class=nx>hostOverride?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=ow>void</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> <h4 id=method-waitforidentity>Method waitForIdentity</h4> <p>Waits for identity exchange to complete for a thread.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-123-1 name=__codelineno-123-1 href=#__codelineno-123-1></a><span class=k>async</span><span class=w> </span><span class=nx>waitForIdentity</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-123-2 name=__codelineno-123-2 href=#__codelineno-123-2></a><span class=w>    </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-123-3 name=__codelineno-123-3 href=#__codelineno-123-3></a><span class=w>    </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-123-4 name=__codelineno-123-4 href=#__codelineno-123-4></a><span class=p>})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Thread</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-thread>Thread</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-waitforreceipt>Method waitForReceipt</h4> <p>Waits for a receipt to arrive for a thread.</p> <p>Uses polling via syncThreads because live listeners are optional.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-124-1 name=__codelineno-124-1 href=#__codelineno-124-1></a><span class=k>async</span><span class=w> </span><span class=nx>waitForReceipt</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-124-2 name=__codelineno-124-2 href=#__codelineno-124-2></a><span class=w>    </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-124-3 name=__codelineno-124-3 href=#__codelineno-124-3></a><span class=w>    </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-124-4 name=__codelineno-124-4 href=#__codelineno-124-4></a><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-receipt>Receipt</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-waitforsettlement>Method waitForSettlement</h4> <p>Waits for a settlement to arrive for a thread.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-125-1 name=__codelineno-125-1 href=#__codelineno-125-1></a><span class=k>async</span><span class=w> </span><span class=nx>waitForSettlement</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-125-2 name=__codelineno-125-2 href=#__codelineno-125-2></a><span class=w>    </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-125-3 name=__codelineno-125-3 href=#__codelineno-125-3></a><span class=w>    </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-125-4 name=__codelineno-125-4 href=#__codelineno-125-4></a><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Settlement</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#type-threadid>ThreadId</a></p> <h4 id=method-waitforstate>Method waitForState</h4> <p>Waits for a thread to reach a specific state.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-126-1 name=__codelineno-126-1 href=#__codelineno-126-1></a><span class=k>async</span><span class=w> </span><span class=nx>waitForState</span><span class=p>(</span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>,</span><span class=w> </span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-126-2 name=__codelineno-126-2 href=#__codelineno-126-2></a><span class=w>    </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-126-3 name=__codelineno-126-3 href=#__codelineno-126-3></a><span class=w>    </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-126-4 name=__codelineno-126-4 href=#__codelineno-126-4></a><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Thread</span><span class=o>&gt;</span><span class=w> </span>
</code></pre></div> See also: <a href=./#type-remittancethreadstate>RemittanceThreadState</a>, <a href=./#interface-thread>Thread</a>, <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=class-threadhandle>Class: ThreadHandle</h3> <p>A lightweight wrapper around a thread's invoice, with convenience methods.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-127-1 name=__codelineno-127-1 href=#__codelineno-127-1></a><span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>ThreadHandle</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-127-2 name=__codelineno-127-2 href=#__codelineno-127-2></a><span class=w>    </span><span class=kr>constructor</span><span class=p>(</span><span class=k>protected</span><span class=w> </span><span class=k>readonly</span><span class=w> </span><span class=nx>manager</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceManager</span><span class=p>,</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=k>readonly</span><span class=w> </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-127-3 name=__codelineno-127-3 href=#__codelineno-127-3></a><span class=w>    </span><span class=nx>get</span><span class=w> </span><span class=nx>thread</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nx>Thread</span><span class=w> </span>
<a id=__codelineno-127-4 name=__codelineno-127-4 href=#__codelineno-127-4></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForState</span><span class=p>(</span><span class=nx>state</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>,</span><span class=w> </span><span class=nx>opts</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-127-5 name=__codelineno-127-5 href=#__codelineno-127-5></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-6 name=__codelineno-127-6 href=#__codelineno-127-6></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-7 name=__codelineno-127-7 href=#__codelineno-127-7></a><span class=w>    </span><span class=p>})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Thread</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-127-8 name=__codelineno-127-8 href=#__codelineno-127-8></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForIdentity</span><span class=p>(</span><span class=nx>opts</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-127-9 name=__codelineno-127-9 href=#__codelineno-127-9></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-10 name=__codelineno-127-10 href=#__codelineno-127-10></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-11 name=__codelineno-127-11 href=#__codelineno-127-11></a><span class=w>    </span><span class=p>})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Thread</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-127-12 name=__codelineno-127-12 href=#__codelineno-127-12></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForSettlement</span><span class=p>(</span><span class=nx>opts</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-127-13 name=__codelineno-127-13 href=#__codelineno-127-13></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-14 name=__codelineno-127-14 href=#__codelineno-127-14></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-15 name=__codelineno-127-15 href=#__codelineno-127-15></a><span class=w>    </span><span class=p>})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Settlement</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-127-16 name=__codelineno-127-16 href=#__codelineno-127-16></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>waitForReceipt</span><span class=p>(</span><span class=nx>opts</span><span class=o>?:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-127-17 name=__codelineno-127-17 href=#__codelineno-127-17></a><span class=w>        </span><span class=nx>timeoutMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-18 name=__codelineno-127-18 href=#__codelineno-127-18></a><span class=w>        </span><span class=nx>pollIntervalMs?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
<a id=__codelineno-127-19 name=__codelineno-127-19 href=#__codelineno-127-19></a><span class=w>    </span><span class=p>})</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Receipt</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Termination</span><span class=o>&gt;</span><span class=w> </span>
<a id=__codelineno-127-20 name=__codelineno-127-20 href=#__codelineno-127-20></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-receipt>Receipt</a>, <a href=./#class-remittancemanager>RemittanceManager</a>, <a href=./#type-remittancethreadstate>RemittanceThreadState</a>, <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#interface-thread>Thread</a>, <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h2 id=functions>Functions</h2> <h2 id=types>Types</h2> <table> <thead> <tr> <th></th> </tr> </thead> <tbody> <tr> <td><a href=#type-remittanceevent>RemittanceEvent</a></td> </tr> <tr> <td><a href=#type-remittancekind>RemittanceKind</a></td> </tr> <tr> <td><a href=#type-remittanceoptionid>RemittanceOptionId</a></td> </tr> <tr> <td><a href=#type-remittancethreadstate>RemittanceThreadState</a></td> </tr> <tr> <td><a href=#type-threadid>ThreadId</a></td> </tr> <tr> <td><a href=#type-unixmillis>UnixMillis</a></td> </tr> </tbody> </table> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=type-remittanceevent>Type: RemittanceEvent</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-128-1 name=__codelineno-128-1 href=#__codelineno-128-1></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>RemittanceEvent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-2 name=__codelineno-128-2 href=#__codelineno-128-2></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;threadCreated&quot;</span><span class=p>;</span>
<a id=__codelineno-128-3 name=__codelineno-128-3 href=#__codelineno-128-3></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-4 name=__codelineno-128-4 href=#__codelineno-128-4></a><span class=w>    </span><span class=nx>thread</span><span class=o>:</span><span class=w> </span><span class=kt>Thread</span><span class=p>;</span>
<a id=__codelineno-128-5 name=__codelineno-128-5 href=#__codelineno-128-5></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-6 name=__codelineno-128-6 href=#__codelineno-128-6></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;stateChanged&quot;</span><span class=p>;</span>
<a id=__codelineno-128-7 name=__codelineno-128-7 href=#__codelineno-128-7></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-8 name=__codelineno-128-8 href=#__codelineno-128-8></a><span class=w>    </span><span class=nx>previous</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-128-9 name=__codelineno-128-9 href=#__codelineno-128-9></a><span class=w>    </span><span class=nx>next</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceThreadState</span><span class=p>;</span>
<a id=__codelineno-128-10 name=__codelineno-128-10 href=#__codelineno-128-10></a><span class=w>    </span><span class=nx>reason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-128-11 name=__codelineno-128-11 href=#__codelineno-128-11></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-12 name=__codelineno-128-12 href=#__codelineno-128-12></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;envelopeSent&quot;</span><span class=p>;</span>
<a id=__codelineno-128-13 name=__codelineno-128-13 href=#__codelineno-128-13></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-14 name=__codelineno-128-14 href=#__codelineno-128-14></a><span class=w>    </span><span class=nx>envelope</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEnvelope</span><span class=p>;</span>
<a id=__codelineno-128-15 name=__codelineno-128-15 href=#__codelineno-128-15></a><span class=w>    </span><span class=nx>transportMessageId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-128-16 name=__codelineno-128-16 href=#__codelineno-128-16></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-17 name=__codelineno-128-17 href=#__codelineno-128-17></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;envelopeReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-128-18 name=__codelineno-128-18 href=#__codelineno-128-18></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-19 name=__codelineno-128-19 href=#__codelineno-128-19></a><span class=w>    </span><span class=nx>envelope</span><span class=o>:</span><span class=w> </span><span class=kt>RemittanceEnvelope</span><span class=p>;</span>
<a id=__codelineno-128-20 name=__codelineno-128-20 href=#__codelineno-128-20></a><span class=w>    </span><span class=nx>transportMessageId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-128-21 name=__codelineno-128-21 href=#__codelineno-128-21></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-22 name=__codelineno-128-22 href=#__codelineno-128-22></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityRequested&quot;</span><span class=p>;</span>
<a id=__codelineno-128-23 name=__codelineno-128-23 href=#__codelineno-128-23></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-24 name=__codelineno-128-24 href=#__codelineno-128-24></a><span class=w>    </span><span class=nx>direction</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;in&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;out&quot;</span><span class=p>;</span>
<a id=__codelineno-128-25 name=__codelineno-128-25 href=#__codelineno-128-25></a><span class=w>    </span><span class=nx>request</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationRequest</span><span class=p>;</span>
<a id=__codelineno-128-26 name=__codelineno-128-26 href=#__codelineno-128-26></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-27 name=__codelineno-128-27 href=#__codelineno-128-27></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityResponded&quot;</span><span class=p>;</span>
<a id=__codelineno-128-28 name=__codelineno-128-28 href=#__codelineno-128-28></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-29 name=__codelineno-128-29 href=#__codelineno-128-29></a><span class=w>    </span><span class=nx>direction</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;in&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;out&quot;</span><span class=p>;</span>
<a id=__codelineno-128-30 name=__codelineno-128-30 href=#__codelineno-128-30></a><span class=w>    </span><span class=nx>response</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationResponse</span><span class=p>;</span>
<a id=__codelineno-128-31 name=__codelineno-128-31 href=#__codelineno-128-31></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-32 name=__codelineno-128-32 href=#__codelineno-128-32></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;identityAcknowledged&quot;</span><span class=p>;</span>
<a id=__codelineno-128-33 name=__codelineno-128-33 href=#__codelineno-128-33></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-34 name=__codelineno-128-34 href=#__codelineno-128-34></a><span class=w>    </span><span class=nx>direction</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;in&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;out&quot;</span><span class=p>;</span>
<a id=__codelineno-128-35 name=__codelineno-128-35 href=#__codelineno-128-35></a><span class=w>    </span><span class=nx>acknowledgment</span><span class=o>:</span><span class=w> </span><span class=kt>IdentityVerificationAcknowledgment</span><span class=p>;</span>
<a id=__codelineno-128-36 name=__codelineno-128-36 href=#__codelineno-128-36></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-37 name=__codelineno-128-37 href=#__codelineno-128-37></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;invoiceSent&quot;</span><span class=p>;</span>
<a id=__codelineno-128-38 name=__codelineno-128-38 href=#__codelineno-128-38></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-39 name=__codelineno-128-39 href=#__codelineno-128-39></a><span class=w>    </span><span class=nx>invoice</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-128-40 name=__codelineno-128-40 href=#__codelineno-128-40></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-41 name=__codelineno-128-41 href=#__codelineno-128-41></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;invoiceReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-128-42 name=__codelineno-128-42 href=#__codelineno-128-42></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-43 name=__codelineno-128-43 href=#__codelineno-128-43></a><span class=w>    </span><span class=nx>invoice</span><span class=o>:</span><span class=w> </span><span class=kt>Invoice</span><span class=p>;</span>
<a id=__codelineno-128-44 name=__codelineno-128-44 href=#__codelineno-128-44></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-45 name=__codelineno-128-45 href=#__codelineno-128-45></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settlementSent&quot;</span><span class=p>;</span>
<a id=__codelineno-128-46 name=__codelineno-128-46 href=#__codelineno-128-46></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-47 name=__codelineno-128-47 href=#__codelineno-128-47></a><span class=w>    </span><span class=nx>settlement</span><span class=o>:</span><span class=w> </span><span class=kt>Settlement</span><span class=p>;</span>
<a id=__codelineno-128-48 name=__codelineno-128-48 href=#__codelineno-128-48></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-49 name=__codelineno-128-49 href=#__codelineno-128-49></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;settlementReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-128-50 name=__codelineno-128-50 href=#__codelineno-128-50></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-51 name=__codelineno-128-51 href=#__codelineno-128-51></a><span class=w>    </span><span class=nx>settlement</span><span class=o>:</span><span class=w> </span><span class=kt>Settlement</span><span class=p>;</span>
<a id=__codelineno-128-52 name=__codelineno-128-52 href=#__codelineno-128-52></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-53 name=__codelineno-128-53 href=#__codelineno-128-53></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;receiptSent&quot;</span><span class=p>;</span>
<a id=__codelineno-128-54 name=__codelineno-128-54 href=#__codelineno-128-54></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-55 name=__codelineno-128-55 href=#__codelineno-128-55></a><span class=w>    </span><span class=nx>receipt</span><span class=o>:</span><span class=w> </span><span class=kt>Receipt</span><span class=p>;</span>
<a id=__codelineno-128-56 name=__codelineno-128-56 href=#__codelineno-128-56></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-57 name=__codelineno-128-57 href=#__codelineno-128-57></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;receiptReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-128-58 name=__codelineno-128-58 href=#__codelineno-128-58></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-59 name=__codelineno-128-59 href=#__codelineno-128-59></a><span class=w>    </span><span class=nx>receipt</span><span class=o>:</span><span class=w> </span><span class=kt>Receipt</span><span class=p>;</span>
<a id=__codelineno-128-60 name=__codelineno-128-60 href=#__codelineno-128-60></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-61 name=__codelineno-128-61 href=#__codelineno-128-61></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminationSent&quot;</span><span class=p>;</span>
<a id=__codelineno-128-62 name=__codelineno-128-62 href=#__codelineno-128-62></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-63 name=__codelineno-128-63 href=#__codelineno-128-63></a><span class=w>    </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-128-64 name=__codelineno-128-64 href=#__codelineno-128-64></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-65 name=__codelineno-128-65 href=#__codelineno-128-65></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;terminationReceived&quot;</span><span class=p>;</span>
<a id=__codelineno-128-66 name=__codelineno-128-66 href=#__codelineno-128-66></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-67 name=__codelineno-128-67 href=#__codelineno-128-67></a><span class=w>    </span><span class=nx>termination</span><span class=o>:</span><span class=w> </span><span class=kt>Termination</span><span class=p>;</span>
<a id=__codelineno-128-68 name=__codelineno-128-68 href=#__codelineno-128-68></a><span class=p>}</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-128-69 name=__codelineno-128-69 href=#__codelineno-128-69></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>;</span>
<a id=__codelineno-128-70 name=__codelineno-128-70 href=#__codelineno-128-70></a><span class=w>    </span><span class=nx>threadId</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadId</span><span class=p>;</span>
<a id=__codelineno-128-71 name=__codelineno-128-71 href=#__codelineno-128-71></a><span class=w>    </span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
<a id=__codelineno-128-72 name=__codelineno-128-72 href=#__codelineno-128-72></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-identityverificationacknowledgment>IdentityVerificationAcknowledgment</a>, <a href=./#interface-identityverificationrequest>IdentityVerificationRequest</a>, <a href=./#interface-identityverificationresponse>IdentityVerificationResponse</a>, <a href=./#interface-invoice>Invoice</a>, <a href=./#interface-receipt>Receipt</a>, <a href=./#interface-remittanceenvelope>RemittanceEnvelope</a>, <a href=./#type-remittancethreadstate>RemittanceThreadState</a>, <a href=./#interface-settlement>Settlement</a>, <a href=./#interface-termination>Termination</a>, <a href=./#interface-thread>Thread</a>, <a href=./#type-threadid>ThreadId</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=type-remittancekind>Type: RemittanceKind</h3> <p>Protocol envelope kinds. Everything runs in threads and carries a threadId.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-129-1 name=__codelineno-129-1 href=#__codelineno-129-1></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>RemittanceKind</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;invoice&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;identityVerificationRequest&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;identityVerificationResponse&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;identityVerificationAcknowledgment&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;settlement&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;receipt&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;termination&quot;</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=type-remittanceoptionid>Type: RemittanceOptionId</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-130-1 name=__codelineno-130-1 href=#__codelineno-130-1></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>RemittanceOptionId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>Base64String</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-base64string>Base64String</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=type-remittancethreadstate>Type: RemittanceThreadState</h3> <p>Remittance thread state machine.</p> <p>States: - new: thread exists but no identity/invoice/settlement activity yet. - identityRequested: identity request sent or received. - identityResponded: identity response sent or received. - identityAcknowledged: identity response acknowledged (required before proceeding). - invoiced: invoice sent or received. - settled: settlement sent or received. - receipted: receipt issued or received. - terminated: thread terminated with a reason. - errored: unexpected error occurred while processing the thread.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-131-1 name=__codelineno-131-1 href=#__codelineno-131-1></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>RemittanceThreadState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;new&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;identityRequested&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;identityResponded&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;identityAcknowledged&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;invoiced&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;settled&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;receipted&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;errored&quot;</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=type-threadid>Type: ThreadId</h3> <p>Types for core Remittance protocol.</p> <p>The goal is to keep the core protocol: - UTXO-friendly (transactions and partial transactions can be carried as artifacts) - Denomination-agnostic (amounts are typed, not forced to satoshis) - Module-oriented (remittance option payloads are opaque to the core)</p> <div class=highlight><pre><span></span><code><a id=__codelineno-132-1 name=__codelineno-132-1 href=#__codelineno-132-1></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>ThreadId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>Base64String</span>
</code></pre></div> <p>See also: <a href=../wallet/#type-base64string>Base64String</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=type-unixmillis>Type: UnixMillis</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-133-1 name=__codelineno-133-1 href=#__codelineno-133-1></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>UnixMillis</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>number</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h2 id=enums>Enums</h2> <h2 id=variables>Variables</h2> <table> <thead> <tr> <th></th> </tr> </thead> <tbody> <tr> <td><a href=#variable-default_remittance_messagebox>DEFAULT_REMITTANCE_MESSAGEBOX</a></td> </tr> <tr> <td><a href=#variable-defaultlockingscriptprovider>DefaultLockingScriptProvider</a></td> </tr> <tr> <td><a href=#variable-defaultnonceprovider>DefaultNonceProvider</a></td> </tr> <tr> <td><a href=#variable-remittance_state_transitions>REMITTANCE_STATE_TRANSITIONS</a></td> </tr> <tr> <td><a href=#variable-sat_unit>SAT_UNIT</a></td> </tr> </tbody> </table> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=variable-default_remittance_messagebox>Variable: DEFAULT_REMITTANCE_MESSAGEBOX</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-134-1 name=__codelineno-134-1 href=#__codelineno-134-1></a><span class=nx>DEFAULT_REMITTANCE_MESSAGEBOX</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;remittance_inbox&quot;</span>
</code></pre></div> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=variable-defaultlockingscriptprovider>Variable: DefaultLockingScriptProvider</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-135-1 name=__codelineno-135-1 href=#__codelineno-135-1></a><span class=nx>DefaultLockingScriptProvider</span><span class=o>:</span><span class=w> </span><span class=kt>LockingScriptProvider</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-135-2 name=__codelineno-135-2 href=#__codelineno-135-2></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>pubKeyToP2PKHLockingScript</span><span class=p>(</span><span class=nx>publicKey</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-135-3 name=__codelineno-135-3 href=#__codelineno-135-3></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>address</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>PublicKey</span><span class=p>.</span><span class=nx>fromString</span><span class=p>(</span><span class=nx>publicKey</span><span class=p>).</span><span class=nx>toAddress</span><span class=p>();</span>
<a id=__codelineno-135-4 name=__codelineno-135-4 href=#__codelineno-135-4></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>P2PKH</span><span class=p>().</span><span class=nx>lock</span><span class=p>(</span><span class=nx>address</span><span class=p>).</span><span class=nx>toHex</span><span class=p>();</span>
<a id=__codelineno-135-5 name=__codelineno-135-5 href=#__codelineno-135-5></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-135-6 name=__codelineno-135-6 href=#__codelineno-135-6></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-lockingscriptprovider>LockingScriptProvider</a>, <a href=../script/#class-p2pkh>P2PKH</a>, <a href=../primitives/#class-publickey>PublicKey</a>, <a href=../primitives/#variable-tohex>toHex</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=variable-defaultnonceprovider>Variable: DefaultNonceProvider</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-136-1 name=__codelineno-136-1 href=#__codelineno-136-1></a><span class=nx>DefaultNonceProvider</span><span class=o>:</span><span class=w> </span><span class=kt>NonceProvider</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-136-2 name=__codelineno-136-2 href=#__codelineno-136-2></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>createNonce</span><span class=p>(</span><span class=nx>wallet</span><span class=p>,</span><span class=w> </span><span class=nx>scope</span><span class=p>,</span><span class=w> </span><span class=nx>originator</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-136-3 name=__codelineno-136-3 href=#__codelineno-136-3></a><span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>origin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>originator</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>OriginatorDomainNameStringUnder250Bytes</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>undefined</span><span class=p>;</span>
<a id=__codelineno-136-4 name=__codelineno-136-4 href=#__codelineno-136-4></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>createNonce</span><span class=p>(</span><span class=nx>wallet</span><span class=p>,</span><span class=w> </span><span class=nx>scope</span><span class=p>,</span><span class=w> </span><span class=nx>origin</span><span class=p>);</span>
<a id=__codelineno-136-5 name=__codelineno-136-5 href=#__codelineno-136-5></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-136-6 name=__codelineno-136-6 href=#__codelineno-136-6></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-nonceprovider>NonceProvider</a>, <a href=../wallet/#type-originatordomainnamestringunder250bytes>OriginatorDomainNameStringUnder250Bytes</a>, <a href=../auth/#function-createnonce>createNonce</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=variable-remittance_state_transitions>Variable: REMITTANCE_STATE_TRANSITIONS</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-137-1 name=__codelineno-137-1 href=#__codelineno-137-1></a><span class=nx>REMITTANCE_STATE_TRANSITIONS</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=nx>RemittanceThreadState</span><span class=p>,</span><span class=w> </span><span class=nx>RemittanceThreadState</span><span class=p>[]</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-137-2 name=__codelineno-137-2 href=#__codelineno-137-2></a><span class=w>    </span><span class=ow>new</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;identityRequested&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;invoiced&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;settled&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-3 name=__codelineno-137-3 href=#__codelineno-137-3></a><span class=w>    </span><span class=nx>identityRequested</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;identityResponded&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;identityAcknowledged&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;invoiced&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;settled&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-4 name=__codelineno-137-4 href=#__codelineno-137-4></a><span class=w>    </span><span class=nx>identityResponded</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;identityAcknowledged&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;invoiced&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;settled&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-5 name=__codelineno-137-5 href=#__codelineno-137-5></a><span class=w>    </span><span class=nx>identityAcknowledged</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;invoiced&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;settled&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-6 name=__codelineno-137-6 href=#__codelineno-137-6></a><span class=w>    </span><span class=nx>invoiced</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;identityRequested&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;identityResponded&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;identityAcknowledged&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;settled&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-7 name=__codelineno-137-7 href=#__codelineno-137-7></a><span class=w>    </span><span class=nx>settled</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;receipted&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-8 name=__codelineno-137-8 href=#__codelineno-137-8></a><span class=w>    </span><span class=nx>receipted</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;terminated&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-9 name=__codelineno-137-9 href=#__codelineno-137-9></a><span class=w>    </span><span class=nx>terminated</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;errored&quot;</span><span class=p>],</span>
<a id=__codelineno-137-10 name=__codelineno-137-10 href=#__codelineno-137-10></a><span class=w>    </span><span class=nx>errored</span><span class=o>:</span><span class=w> </span><span class=p>[]</span>
<a id=__codelineno-137-11 name=__codelineno-137-11 href=#__codelineno-137-11></a><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#type-remittancethreadstate>RemittanceThreadState</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> <h3 id=variable-sat_unit>Variable: SAT_UNIT</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-138-1 name=__codelineno-138-1 href=#__codelineno-138-1></a><span class=nx>SAT_UNIT</span><span class=o>:</span><span class=w> </span><span class=kt>Unit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bsv&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>code</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;sat&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>decimals</span><span class=o>:</span><span class=w> </span><span class=kt>0</span><span class=w> </span><span class=p>}</span>
</code></pre></div> <p>See also: <a href=./#interface-unit>Unit</a></p> <p>Links: <a href=#api>API</a>, <a href=#interfaces>Interfaces</a>, <a href=#classes>Classes</a>, <a href=#functions>Functions</a>, <a href=#types>Types</a>, <a href=#enums>Enums</a>, <a href=#variables>Variables</a></p> <hr> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.top", "search.highlight", "search.share", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>